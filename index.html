<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.4.2">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/listenerri-favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/listenerri-favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/listenerri-favicon-16x16.png">
  <link rel="mask-icon" href="/images/listenerri-favicon-32x32.png" color="#222">
  <meta name="baidu-site-verification" content="eshpSLiJfj">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"listenerri.com","root":"/","scheme":"Gemini","version":"7.8.0","exturl":false,"sidebar":{"position":"right","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":true,"scrollpercent":true},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":true},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"path":"search.xml"};
  </script>

  <meta name="description" content="学的越多越发现会的越少 : )">
<meta property="og:type" content="website">
<meta property="og:title" content="listenerri&#39;s blog">
<meta property="og:url" content="https://listenerri.com/index.html">
<meta property="og:site_name" content="listenerri&#39;s blog">
<meta property="og:description" content="学的越多越发现会的越少 : )">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="listenerri">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="https://listenerri.com/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : true,
    isPost : false,
    lang   : 'zh-CN'
  };
</script>

  <title>listenerri's blog</title>
  


  <script>
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?f4f2d9354392e6db69ef67305fca0a31";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>




  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">listenerri's blog</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">学的越多越发现会的越少 : )</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a>

  </li>
        <li class="menu-item menu-item-in-a-few-words">

    <a href="/in-a-few-words/" rel="section"><i class="fa fa-list fa-fw"></i>句不成章</a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>关于</a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off"
           placeholder="搜索..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div id="search-result">
  <div id="no-result">
    <i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>
  </div>
</div>

    </div>
  </div>

</div>
    </header>

    


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content index posts-expand">
            
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://listenerri.com/2024/10/17/site-migrated/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="listenerri">
      <meta itemprop="description" content="学的越多越发现会的越少 : )">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="listenerri's blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2024/10/17/site-migrated/" class="post-title-link" itemprop="url">网站已迁移</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2024-10-17 18:54:15 / 修改时间：18:56:21" itemprop="dateCreated datePublished" datetime="2024-10-17T18:54:15+08:00">2024-10-17</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/others/" itemprop="url" rel="index"><span itemprop="name">others</span></a>
                </span>
            </span>

          
            <span id="/2024/10/17/site-migrated/" class="post-meta-item leancloud_visitors" data-flag-title="网站已迁移" title="阅读次数">
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              <span class="post-meta-item-text">阅读次数：</span>
              <span class="leancloud-visitors-count"></span>
            </span>
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Valine：</span>
    
    <a title="valine" href="/2024/10/17/site-migrated/#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/2024/10/17/site-migrated/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>博客网站已迁移至：<a target="_blank" rel="noopener" href="https://blog.listenerri.com/">https://blog.listenerri.com</a></p>
<p>新站基于 halo 搭建：<a target="_blank" rel="noopener" href="https://www.halo.run/">https://www.halo.run</a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://listenerri.com/2023/10/30/%E8%B7%A8%E5%B9%B3%E5%8F%B0%E4%BD%BF%E7%94%A8%E9%9D%99%E6%80%81%E5%BA%93%E5%92%8C%E5%85%B1%E4%BA%AB%E5%BA%93%E7%9A%84%E6%9C%80%E4%BD%B3%E5%AE%9E%E8%B7%B5/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="listenerri">
      <meta itemprop="description" content="学的越多越发现会的越少 : )">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="listenerri's blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2023/10/30/%E8%B7%A8%E5%B9%B3%E5%8F%B0%E4%BD%BF%E7%94%A8%E9%9D%99%E6%80%81%E5%BA%93%E5%92%8C%E5%85%B1%E4%BA%AB%E5%BA%93%E7%9A%84%E6%9C%80%E4%BD%B3%E5%AE%9E%E8%B7%B5/" class="post-title-link" itemprop="url">跨平台使用静态库和共享库的最佳实践</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2023-10-30 11:31:50 / 修改时间：12:38:10" itemprop="dateCreated datePublished" datetime="2023-10-30T11:31:50+08:00">2023-10-30</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/others/" itemprop="url" rel="index"><span itemprop="name">others</span></a>
                </span>
            </span>

          
            <span id="/2023/10/30/%E8%B7%A8%E5%B9%B3%E5%8F%B0%E4%BD%BF%E7%94%A8%E9%9D%99%E6%80%81%E5%BA%93%E5%92%8C%E5%85%B1%E4%BA%AB%E5%BA%93%E7%9A%84%E6%9C%80%E4%BD%B3%E5%AE%9E%E8%B7%B5/" class="post-meta-item leancloud_visitors" data-flag-title="跨平台使用静态库和共享库的最佳实践" title="阅读次数">
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              <span class="post-meta-item-text">阅读次数：</span>
              <span class="leancloud-visitors-count"></span>
            </span>
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Valine：</span>
    
    <a title="valine" href="/2023/10/30/%E8%B7%A8%E5%B9%B3%E5%8F%B0%E4%BD%BF%E7%94%A8%E9%9D%99%E6%80%81%E5%BA%93%E5%92%8C%E5%85%B1%E4%BA%AB%E5%BA%93%E7%9A%84%E6%9C%80%E4%BD%B3%E5%AE%9E%E8%B7%B5/#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/2023/10/30/%E8%B7%A8%E5%B9%B3%E5%8F%B0%E4%BD%BF%E7%94%A8%E9%9D%99%E6%80%81%E5%BA%93%E5%92%8C%E5%85%B1%E4%BA%AB%E5%BA%93%E7%9A%84%E6%9C%80%E4%BD%B3%E5%AE%9E%E8%B7%B5/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>本文详细讨论了在 windows 和 linux 平台使用不同编译器以及 cmake 中关于使用共享库和静态库的相关内容</p>
<p>后文提到了如下几个编译器：</p>
<ul>
<li>linux-gcc 就是 linux 下最常用的编译器了</li>
<li>windows-msvc-cl 指 windows 的官方编译器，VS 中默认使用它，其中 cl 是命令行中的编译器命令</li>
<li>windows-mingw-gcc 指 windows 下开源的 mingw-64 gcc 编译器实现，某些 windows IDE 会内置这种编译器，比如 CLion 或 QTCreator<ul>
<li>绝大多数默认行为与 linux-gcc 保持一致，但不可将二者完全是为行为一致</li>
</ul>
</li>
<li>clang 编译器用的少，不熟悉，暂不讨论</li>
</ul>
<h1 id="共享库符号导出"><a href="#共享库符号导出" class="headerlink" title="共享库符号导出"></a>共享库符号导出</h1><p>符号导出是接触 windows 共享库开发之后才了解的概念，以前一直在 linux 下开发，linux 的默认行为比较开放，不特殊设置就会执行导出符号的行为，所以没意识到过这个问题</p>
<p>之所以要有符号导出，是基于共享库的原理做出的设计，共享库文件是在可执行程序运行时才加载的，这有多个好处：</p>
<ul>
<li>减小了可执行程序文件的大小</li>
<li>共享库可以加载一次，然后在多个可执行程序进程间共享，减少了内存占用</li>
<li>减小更新包大小，当只有共享库的代码改动时，只需要重新编译更新共享库即可应用新代码，不用重新编译整个项目</li>
</ul>
<p>有这么些好处，那符号导出这个操作到底意味着什么？是个什么原理呢？</p>
<p>注意：处理导入导出符号是编译过程中链接阶段链接器的工作，这里为了方便起见，后文仍然将其视为编译器的功能，以便行文流畅思路清晰</p>
<p>大体上来说是把共享库里被导出的符号与其对应的代码实现拆分，先让可执行程序只拿到其需要的符号，这样就足够完成编译过程，生成可执行程序文件了，然后在运行时把符号对应的代码实现填充给可执行程序，如此一来可执行程序就完整了，可以正常运行了。有点类似于 C 语言中的 extern 关键字的作用，先用 extern 声明一个符号临时占位拿来用着，而这个符号对应的定义却在其他地方。</p>
          <!--noindex-->
            <div class="post-button">
              <a class="btn" href="/2023/10/30/%E8%B7%A8%E5%B9%B3%E5%8F%B0%E4%BD%BF%E7%94%A8%E9%9D%99%E6%80%81%E5%BA%93%E5%92%8C%E5%85%B1%E4%BA%AB%E5%BA%93%E7%9A%84%E6%9C%80%E4%BD%B3%E5%AE%9E%E8%B7%B5/#more" rel="contents">
                阅读全文 &raquo;
              </a>
            </div>
          <!--/noindex-->
        
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://listenerri.com/2023/10/18/%E4%B8%BA%E4%BB%80%E4%B9%88-Windows-%E4%B8%8D%E5%83%8F-Linux-%E5%8F%AF%E4%BB%A5%E6%B7%B7%E7%94%A8-Debug-%E5%92%8C-Release-%E5%BA%93/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="listenerri">
      <meta itemprop="description" content="学的越多越发现会的越少 : )">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="listenerri's blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2023/10/18/%E4%B8%BA%E4%BB%80%E4%B9%88-Windows-%E4%B8%8D%E5%83%8F-Linux-%E5%8F%AF%E4%BB%A5%E6%B7%B7%E7%94%A8-Debug-%E5%92%8C-Release-%E5%BA%93/" class="post-title-link" itemprop="url">为什么 Windows 不像 Linux 可以混用 Debug 和 Release 库</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2023-10-18 19:27:24 / 修改时间：19:34:13" itemprop="dateCreated datePublished" datetime="2023-10-18T19:27:24+08:00">2023-10-18</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/windows/" itemprop="url" rel="index"><span itemprop="name">windows</span></a>
                </span>
            </span>

          
            <span id="/2023/10/18/%E4%B8%BA%E4%BB%80%E4%B9%88-Windows-%E4%B8%8D%E5%83%8F-Linux-%E5%8F%AF%E4%BB%A5%E6%B7%B7%E7%94%A8-Debug-%E5%92%8C-Release-%E5%BA%93/" class="post-meta-item leancloud_visitors" data-flag-title="为什么 Windows 不像 Linux 可以混用 Debug 和 Release 库" title="阅读次数">
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              <span class="post-meta-item-text">阅读次数：</span>
              <span class="leancloud-visitors-count"></span>
            </span>
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Valine：</span>
    
    <a title="valine" href="/2023/10/18/%E4%B8%BA%E4%BB%80%E4%B9%88-Windows-%E4%B8%8D%E5%83%8F-Linux-%E5%8F%AF%E4%BB%A5%E6%B7%B7%E7%94%A8-Debug-%E5%92%8C-Release-%E5%BA%93/#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/2023/10/18/%E4%B8%BA%E4%BB%80%E4%B9%88-Windows-%E4%B8%8D%E5%83%8F-Linux-%E5%8F%AF%E4%BB%A5%E6%B7%B7%E7%94%A8-Debug-%E5%92%8C-Release-%E5%BA%93/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>比如在程序中链接使用了第三方的 Release 动态链接库，如果在 VS 中使用 Debug 模式编译，一般情况下都会报错，反之亦然</p>
<p>在 VS2010 之前，这种做法是可以编译通过的，但在运行阶段可能会出现奇怪的错误</p>
<p>从 VS2010 开始 Windows 增加了这种混用的检测，并在编译阶段进行报错</p>
<p>那么 Windows 这样做是为了避免什么问题呢？什么原因导致的问题呢？</p>
<p>这就提到运行时库（一般是指 C 运行时库：CRT），这是系统提供的基础库，Windows 一个有别于 Linux 的重要区别是：<br>在 Windows 下可以为一个进程加载多个 CRT，在 Linux 下则不支持这个行为</p>
<p>在 VS 中项目属性中可以查看和设置项目的 CRT，可以发现 exe/dll/lib 项目都可以设置自己要使用的 CRT，有多种 CRT 可以选择：</p>
<ul>
<li>/MT Multi-threaded</li>
<li>/MTd Multi-threaded Debug</li>
<li>/MD Multi-threaded DLL</li>
<li>/MDd Multi-threaded DLL Debug</li>
</ul>
<p>不带 Debug 的则表示 Release 版本的 CRT，不带 DLL 的表示使用静态库，这意味着甚至可以把 CRT 静态链接到目标中</p>
<p>默认情况下，程序在 Debug 模式下就会默认使用 Debug 模式的 CRT，除非手动修改了此选项，Release 模式下同理</p>
<p>那么这就很清楚了，如果第三方的 dll 库是 Release 版的，那么可以认为其使用的 CRT 是 Release 版的</p>
          <!--noindex-->
            <div class="post-button">
              <a class="btn" href="/2023/10/18/%E4%B8%BA%E4%BB%80%E4%B9%88-Windows-%E4%B8%8D%E5%83%8F-Linux-%E5%8F%AF%E4%BB%A5%E6%B7%B7%E7%94%A8-Debug-%E5%92%8C-Release-%E5%BA%93/#more" rel="contents">
                阅读全文 &raquo;
              </a>
            </div>
          <!--/noindex-->
        
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://listenerri.com/2023/10/08/ld-so-linux-%E5%8A%A8%E6%80%81%E8%BF%9E%E6%8E%A5%E5%99%A8%E6%98%AF%E4%BB%80%E4%B9%88/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="listenerri">
      <meta itemprop="description" content="学的越多越发现会的越少 : )">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="listenerri's blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2023/10/08/ld-so-linux-%E5%8A%A8%E6%80%81%E8%BF%9E%E6%8E%A5%E5%99%A8%E6%98%AF%E4%BB%80%E4%B9%88/" class="post-title-link" itemprop="url">ld.so linux 动态链接器</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2023-10-08 15:27:23 / 修改时间：15:53:00" itemprop="dateCreated datePublished" datetime="2023-10-08T15:27:23+08:00">2023-10-08</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/translation/" itemprop="url" rel="index"><span itemprop="name">translation</span></a>
                </span>
            </span>

          
            <span id="/2023/10/08/ld-so-linux-%E5%8A%A8%E6%80%81%E8%BF%9E%E6%8E%A5%E5%99%A8%E6%98%AF%E4%BB%80%E4%B9%88/" class="post-meta-item leancloud_visitors" data-flag-title="ld.so linux 动态链接器" title="阅读次数">
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              <span class="post-meta-item-text">阅读次数：</span>
              <span class="leancloud-visitors-count"></span>
            </span>
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Valine：</span>
    
    <a title="valine" href="/2023/10/08/ld-so-linux-%E5%8A%A8%E6%80%81%E8%BF%9E%E6%8E%A5%E5%99%A8%E6%98%AF%E4%BB%80%E4%B9%88/#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/2023/10/08/ld-so-linux-%E5%8A%A8%E6%80%81%E8%BF%9E%E6%8E%A5%E5%99%A8%E6%98%AF%E4%BB%80%E4%B9%88/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="1-概述"><a href="#1-概述" class="headerlink" title="1. 概述"></a>1. 概述</h1><p>在 Linux 中生成进程时会执行几个步骤。如果程序依赖于共享库，则除了可执行二进制程序之外，还会将动态链接器加载到内存中。</p>
<p>在本教程中，我们将讨论动态链接器 <code>/lib64/ld-linux-x86-64.so.2</code>。（译者注：动态链接器名字不是固定的，也可能是 <code>/lib/ld-linux.so.2</code> 等等，但一般都是以 <code>ld-</code> 开头的一个 so 文件或符号链接）</p>
<p>首先，我们将简要讨论运行程序的内部结构以及动态链接在此过程中发生的位置。然后，我们将看到一个显示动态链接器用法的示例。</p>
<h1 id="2-动态链接器简介"><a href="#2-动态链接器简介" class="headerlink" title="2. 动态链接器简介"></a>2. 动态链接器简介</h1><p>在了解动态链接器之前，我们首先简要讨论程序的执行，以了解动态链接器的作用。</p>
<h2 id="2-1-可执行二进制文件是如何执行的？"><a href="#2-1-可执行二进制文件是如何执行的？" class="headerlink" title="2.1. 可执行二进制文件是如何执行的？"></a>2.1. 可执行二进制文件是如何执行的？</h2><p>当我们从命令行启动一个进程时，shell 首先调用系统调用 <code>execve()</code> 来执行程序。它打开可执行文件，并经过一些准备后，将可执行文件加载到内存中。</p>
<p><strong>如果可执行文件具有共享库依赖项，则还会加载并运行解释器来组装依赖的共享库。这个解释器就是动态链接器。</strong></p>
<p>一旦动态链接器完成其工作，控制权就会传递给用户程序。</p>
          <!--noindex-->
            <div class="post-button">
              <a class="btn" href="/2023/10/08/ld-so-linux-%E5%8A%A8%E6%80%81%E8%BF%9E%E6%8E%A5%E5%99%A8%E6%98%AF%E4%BB%80%E4%B9%88/#more" rel="contents">
                阅读全文 &raquo;
              </a>
            </div>
          <!--/noindex-->
        
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://listenerri.com/2023/08/31/zeromq-%E4%BD%BF%E7%94%A8%E7%AC%94%E8%AE%B0/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="listenerri">
      <meta itemprop="description" content="学的越多越发现会的越少 : )">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="listenerri's blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2023/08/31/zeromq-%E4%BD%BF%E7%94%A8%E7%AC%94%E8%AE%B0/" class="post-title-link" itemprop="url">zeromq 使用笔记</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2023-08-31 17:43:08 / 修改时间：17:43:49" itemprop="dateCreated datePublished" datetime="2023-08-31T17:43:08+08:00">2023-08-31</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/zeromq/" itemprop="url" rel="index"><span itemprop="name">zeromq</span></a>
                </span>
            </span>

          
            <span id="/2023/08/31/zeromq-%E4%BD%BF%E7%94%A8%E7%AC%94%E8%AE%B0/" class="post-meta-item leancloud_visitors" data-flag-title="zeromq 使用笔记" title="阅读次数">
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              <span class="post-meta-item-text">阅读次数：</span>
              <span class="leancloud-visitors-count"></span>
            </span>
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Valine：</span>
    
    <a title="valine" href="/2023/08/31/zeromq-%E4%BD%BF%E7%94%A8%E7%AC%94%E8%AE%B0/#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/2023/08/31/zeromq-%E4%BD%BF%E7%94%A8%E7%AC%94%E8%AE%B0/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="基础"><a href="#基础" class="headerlink" title="基础"></a>基础</h1><ol>
<li>客户端可以在服务端没有监听端口 （bind）时，直接创建连接，这会在服务端开始监听端口时自动连接并传输消息</li>
<li>已经创建过的连接，如果中途中断，会自动重连</li>
<li>一个服务端 socket 可以监听多个不同的地址，端口不同甚至协议不同</li>
<li>socket 内部有 IO 线程，send 函数返回时，消息并不一定已经发出了，有可能还在队列里等待</li>
<li>每创建一个 context 对象都会隐式创建一个 IO 线程</li>
<li>C 需要库中处理字符串时 不/不应该 发送空终止字符，所以需要在接收字符串数据后，手动追加空终止字符</li>
<li>zmq_send/zmq_recv 和 zmq_msg_send/zmq_msg_recv，主要区别在于是否需要调用者提供 msg 结构体对象，前者不需要，会自动将数据封装到一个默认的 msg 对象中</li>
<li>使用 ZMQ_SNDMORE 参数发送多块消息体，当对端接收到数据时，其实肯定已经接收到了所有消息体，但仍旧需要调用多次 get_socketopt + zmq_recv 接口，读取出来所有消息体数据</li>
<li>使用 zmq_poll（理解参考 linux poll 或 python 协程 异步 IO）相关接口，可以实现同时处理多个 socket 的 send/recv</li>
</ol>
<h1 id="上下文-Context-对象"><a href="#上下文-Context-对象" class="headerlink" title="上下文 Context 对象"></a>上下文 Context 对象</h1><ol>
<li>程序一般都以创建 context 开始</li>
<li>一个进程通常应该创建并使用一个 context 对象</li>
<li>也有创建多个 context 对象的场景，这相当于拥有多个独立的 zqm 实例，并且要注意销毁所有 context 对象</li>
</ol>
<h1 id="请求-响应-模式（REQ-REP）"><a href="#请求-响应-模式（REQ-REP）" class="headerlink" title="请求-响应 模式（REQ-REP）"></a>请求-响应 模式（REQ-REP）</h1><ol>
<li>服务端一般使用 响应 REP 类型的 socket</li>
<li>客户端一般使用 请求 REQ 类型的 socket</li>
<li>REQ 必须遵守 send-recv 配对规则，先请求并且得到响应后，再发起下一个请求，打乱顺序会报错；REP 同样但它先 recv 再 send</li>
<li>理论上可以有 N 多个客户端连接到服务端，同时连接都没问题</li>
<li>这个模式和常见的 CS/BS 模式很类似</li>
<li>多个 REQ 连接到一个 REP 时，从逻辑上来看 REP 端的消息处理流程是同步的，必须要等到当前已接收消息处理完毕并回复对端后，才能去接收处理下一个 REQ 请求，其他 REQ 请求都在阻塞</li>
<li>一个 REQ 可以连接到多个 REP 对端，请求会被负载均衡得发送到多个 REP 端</li>
<li>REQ 和 REP 在概念上可以认为是基于 Router-Dealer 实现的，内部自动处理了信封，上层应用不会看到信封（包括空帧），只会看到数据</li>
<li>当 REQ 直接与 REP 连接时，底层/内部使用的信封是最简单的格式，没有 地址标识帧，只有空帧+数据帧</li>
<li>当 REQ 和 REP 中间加入了 Router-Dealer 作为代理层时，REP 收到的数据包含了 地址标识帧 + 空帧 + 数据帧</li>
<li>REP 会认为从第一帧开始直到空帧为止都是信封帧，所以当 REQ 直接与 REP 连接时即便没有地址帧，也需要有空帧，这是为了兼容 Router-Dealer 作为代理时的情况</li>
<li>REP 在收到消息时，会保存此消息的信封，在回复消息时会自动在把信封加在数据帧前面；由于 REP 必须遵守 请求-响应 配对规则，所以在回复消息时肯定是知道需要使用的信封的</li>
</ol>
<h1 id="Router-Dealer"><a href="#Router-Dealer" class="headerlink" title="Router-Dealer"></a>Router-Dealer</h1><ol>
<li>多用于在 REQ 和 REP 中间作为代理层： REQ(可以是多个) &lt;–&gt; Router(一个) &lt;–&gt; Deader(一个) &lt;–&gt; REP(可以是多个)</li>
<li>可以成对得出现多个 Router-Dealer 来实现多层代理</li>
<li>异步的，调用完 recv/send 接口之后不用必须调用反向的 send/recv 接口</li>
<li>需要显式处理信封，信封用于标识请求来源，同时回复消息时也需要用信封来标识回复到哪一个具体的请求端</li>
<li>信封可以嵌套，用于表示数据被多个 Router 转发</li>
<li>需要自己借助信封处理 路由规则（消息发送到哪些对端）</li>
<li>Router 在收到消息时，会跟踪每一个 TCP 连接，并自动在消息前面追加 地址标识帧，以此告诉上层应用此数据的来源</li>
<li>Router 在发送消息时，根据 地址标识帧 判断需要使用哪个 TCP 连接，发送消息给正确的目标，但真正发送消息前，会移除掉 地址标识帧</li>
<li>Dealer 在逻辑上几乎不处理任何东西，只会接收和发送所有帧，不管是信封帧还是数据帧，不会擅自增加或删除任意帧，就像是一个异步的收发中转站</li>
<li>Router 只关心 地址标识帧，它不知道也不关心后面的帧，包括空帧</li>
<li>当业务层直接使用 Router 时，可以自己处理 地址标识帧，换句话说，可以更灵活得控制消息的路由规则</li>
<li>当业务层直接使用 Dealer 与 REP 连接时，Deader 应该按照如下规则实现：Deader 发送消息时，必须先发送一个空帧（send-more），来模拟 REQ 的消息信封，否则 REP 会丢弃掉没有空帧的消息；在接收数据时，应该判断第一帧是否是空帧，是的话跳过并取得数据帧，不是的话则丢弃掉整个消息（包括数据帧）</li>
<li>类似的，当业务层直接使用 Dealer 与 REQ 连接时，Deader 应该按照如下规则实现：Deader 在接收到的消息时，应该判断第一帧是否是空帧，是的话跳过并取得数据帧，不是的话则丢弃掉整个消息（包括数据帧）；在发送消息时，同样需要先发送空帧</li>
<li>Router 一般会自动为一个新的连接生成标识，也就是 地址标识帧，但如果对端使用 setsockopt 明确设置了标识，Router 则不再自动生成</li>
</ol>
<h1 id="发布-订阅-模式（PUB-SUB）"><a href="#发布-订阅-模式（PUB-SUB）" class="headerlink" title="发布-订阅 模式（PUB-SUB）"></a>发布-订阅 模式（PUB-SUB）</h1><ol>
<li>没有订阅者的话，发布者会把所有消息都丢弃掉</li>
<li>订阅者可以订阅多个发布者，消息将会以轮次获取的方式公平得从每个发布者处获取</li>
<li>如果订阅者使用 TCP 创建连接，但处理消息比较慢，发布者会缓存一定量的消息</li>
<li>在不同版本和连接协议下，filtering 消息过滤这一操作可能在发布者一侧，也可能在订阅者一侧</li>
<li>一个消息会被所有订阅者获取到</li>
<li>订阅者必须要设置 SUBSCRIBE 否则收不到任何数据</li>
<li>订阅者可以设置多个 SUBSCRIBES，匹配到 任何一个 都会收到数据</li>
<li>消息的读写都是异步的</li>
</ol>
          <!--noindex-->
            <div class="post-button">
              <a class="btn" href="/2023/08/31/zeromq-%E4%BD%BF%E7%94%A8%E7%AC%94%E8%AE%B0/#more" rel="contents">
                阅读全文 &raquo;
              </a>
            </div>
          <!--/noindex-->
        
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://listenerri.com/2023/08/31/linux-%E4%BB%85%E4%BD%BF%E7%94%A8%E5%A4%96%E6%8E%A5%E6%98%BE%E7%A4%BA%E5%99%A8%E5%BE%88%E5%8D%A1-%E9%BC%A0%E6%A0%87%E6%B5%81%E7%95%85-%E4%BD%86%E9%BC%A0%E6%A0%87%E4%BA%8B%E4%BB%B6%E7%9B%B8%E5%BA%94%E6%85%A2/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="listenerri">
      <meta itemprop="description" content="学的越多越发现会的越少 : )">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="listenerri's blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2023/08/31/linux-%E4%BB%85%E4%BD%BF%E7%94%A8%E5%A4%96%E6%8E%A5%E6%98%BE%E7%A4%BA%E5%99%A8%E5%BE%88%E5%8D%A1-%E9%BC%A0%E6%A0%87%E6%B5%81%E7%95%85-%E4%BD%86%E9%BC%A0%E6%A0%87%E4%BA%8B%E4%BB%B6%E7%9B%B8%E5%BA%94%E6%85%A2/" class="post-title-link" itemprop="url">linux 仅使用外接显示器很卡 鼠标流畅 但鼠标事件相应慢</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2023-08-31 17:30:35 / 修改时间：17:32:03" itemprop="dateCreated datePublished" datetime="2023-08-31T17:30:35+08:00">2023-08-31</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/linux/" itemprop="url" rel="index"><span itemprop="name">linux</span></a>
                </span>
            </span>

          
            <span id="/2023/08/31/linux-%E4%BB%85%E4%BD%BF%E7%94%A8%E5%A4%96%E6%8E%A5%E6%98%BE%E7%A4%BA%E5%99%A8%E5%BE%88%E5%8D%A1-%E9%BC%A0%E6%A0%87%E6%B5%81%E7%95%85-%E4%BD%86%E9%BC%A0%E6%A0%87%E4%BA%8B%E4%BB%B6%E7%9B%B8%E5%BA%94%E6%85%A2/" class="post-meta-item leancloud_visitors" data-flag-title="linux 仅使用外接显示器很卡 鼠标流畅 但鼠标事件相应慢" title="阅读次数">
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              <span class="post-meta-item-text">阅读次数：</span>
              <span class="leancloud-visitors-count"></span>
            </span>
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Valine：</span>
    
    <a title="valine" href="/2023/08/31/linux-%E4%BB%85%E4%BD%BF%E7%94%A8%E5%A4%96%E6%8E%A5%E6%98%BE%E7%A4%BA%E5%99%A8%E5%BE%88%E5%8D%A1-%E9%BC%A0%E6%A0%87%E6%B5%81%E7%95%85-%E4%BD%86%E9%BC%A0%E6%A0%87%E4%BA%8B%E4%BB%B6%E7%9B%B8%E5%BA%94%E6%85%A2/#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/2023/08/31/linux-%E4%BB%85%E4%BD%BF%E7%94%A8%E5%A4%96%E6%8E%A5%E6%98%BE%E7%A4%BA%E5%99%A8%E5%BE%88%E5%8D%A1-%E9%BC%A0%E6%A0%87%E6%B5%81%E7%95%85-%E4%BD%86%E9%BC%A0%E6%A0%87%E4%BA%8B%E4%BB%B6%E7%9B%B8%E5%BA%94%E6%85%A2/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>还是 linux 下双显卡的老大难问题，解决方法参考：</p>
<p><a target="_blank" rel="noopener" href="https://forum.manjaro.org/t/one-display-hdmi-setup-unusable-extremely-slow/26516">https://forum.manjaro.org/t/one-display-hdmi-setup-unusable-extremely-slow/26516</a></p>
<p><a target="_blank" rel="noopener" href="https://github.com/Askannz/optimus-manager">https://github.com/Askannz/optimus-manager</a></p>
<p>安装 N 卡的切换工具</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://listenerri.com/2023/08/31/wsl2-docker-desktop-%E6%97%A0%E6%B3%95%E5%90%AF%E5%8A%A8-centos6-%E7%AD%89%E6%AF%94%E8%BE%83%E8%80%81%E7%9A%84%E5%AE%B9%E5%99%A8%E7%B3%BB%E7%BB%9F/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="listenerri">
      <meta itemprop="description" content="学的越多越发现会的越少 : )">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="listenerri's blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2023/08/31/wsl2-docker-desktop-%E6%97%A0%E6%B3%95%E5%90%AF%E5%8A%A8-centos6-%E7%AD%89%E6%AF%94%E8%BE%83%E8%80%81%E7%9A%84%E5%AE%B9%E5%99%A8%E7%B3%BB%E7%BB%9F/" class="post-title-link" itemprop="url">wsl2 + docker-desktop 无法启动 centos6 等比较老的容器系统</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2023-08-31 16:51:18 / 修改时间：16:55:11" itemprop="dateCreated datePublished" datetime="2023-08-31T16:51:18+08:00">2023-08-31</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/docker/" itemprop="url" rel="index"><span itemprop="name">docker</span></a>
                </span>
            </span>

          
            <span id="/2023/08/31/wsl2-docker-desktop-%E6%97%A0%E6%B3%95%E5%90%AF%E5%8A%A8-centos6-%E7%AD%89%E6%AF%94%E8%BE%83%E8%80%81%E7%9A%84%E5%AE%B9%E5%99%A8%E7%B3%BB%E7%BB%9F/" class="post-meta-item leancloud_visitors" data-flag-title="wsl2 + docker-desktop 无法启动 centos6 等比较老的容器系统" title="阅读次数">
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              <span class="post-meta-item-text">阅读次数：</span>
              <span class="leancloud-visitors-count"></span>
            </span>
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Valine：</span>
    
    <a title="valine" href="/2023/08/31/wsl2-docker-desktop-%E6%97%A0%E6%B3%95%E5%90%AF%E5%8A%A8-centos6-%E7%AD%89%E6%AF%94%E8%BE%83%E8%80%81%E7%9A%84%E5%AE%B9%E5%99%A8%E7%B3%BB%E7%BB%9F/#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/2023/08/31/wsl2-docker-desktop-%E6%97%A0%E6%B3%95%E5%90%AF%E5%8A%A8-centos6-%E7%AD%89%E6%AF%94%E8%BE%83%E8%80%81%E7%9A%84%E5%AE%B9%E5%99%A8%E7%B3%BB%E7%BB%9F/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>这个问题不只是在 windows wsl2 + docker-desktop 中存在，在 linux 系统中也会出现，解决方法是一样的，都是添加内核启动参数，linux 下一般是修改 grub 配置文件，windows 下的 wsl2 需要修改：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">%userprofile%\.wslconfig</span><br><span class="line"></span><br><span class="line">[wsl2]</span><br><span class="line">kernelCommandLine = vsyscall=emulate</span><br></pre></td></tr></table></figure>

<p>参考地址：<a target="_blank" rel="noopener" href="https://github.com/microsoft/WSL/issues/4694">https://github.com/microsoft/WSL/issues/4694</a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://listenerri.com/2023/08/31/windows-%E4%B8%8D%E8%83%BD%E5%8F%91%E7%8E%B0-linux-%E4%B8%8B%E5%9F%BA%E4%BA%8E-samba-%E7%9A%84%E5%85%B1%E4%BA%AB/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="listenerri">
      <meta itemprop="description" content="学的越多越发现会的越少 : )">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="listenerri's blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2023/08/31/windows-%E4%B8%8D%E8%83%BD%E5%8F%91%E7%8E%B0-linux-%E4%B8%8B%E5%9F%BA%E4%BA%8E-samba-%E7%9A%84%E5%85%B1%E4%BA%AB/" class="post-title-link" itemprop="url">windows 不能发现 linux 下基于 samba 的共享</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2023-08-31 16:46:48 / 修改时间：16:50:08" itemprop="dateCreated datePublished" datetime="2023-08-31T16:46:48+08:00">2023-08-31</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/linux/" itemprop="url" rel="index"><span itemprop="name">linux</span></a>
                </span>
            </span>

          
            <span id="/2023/08/31/windows-%E4%B8%8D%E8%83%BD%E5%8F%91%E7%8E%B0-linux-%E4%B8%8B%E5%9F%BA%E4%BA%8E-samba-%E7%9A%84%E5%85%B1%E4%BA%AB/" class="post-meta-item leancloud_visitors" data-flag-title="windows 不能发现 linux 下基于 samba 的共享" title="阅读次数">
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              <span class="post-meta-item-text">阅读次数：</span>
              <span class="leancloud-visitors-count"></span>
            </span>
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Valine：</span>
    
    <a title="valine" href="/2023/08/31/windows-%E4%B8%8D%E8%83%BD%E5%8F%91%E7%8E%B0-linux-%E4%B8%8B%E5%9F%BA%E4%BA%8E-samba-%E7%9A%84%E5%85%B1%E4%BA%AB/#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/2023/08/31/windows-%E4%B8%8D%E8%83%BD%E5%8F%91%E7%8E%B0-linux-%E4%B8%8B%E5%9F%BA%E4%BA%8E-samba-%E7%9A%84%E5%85%B1%E4%BA%AB/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>windows 不能发现 linux 下基于 samba 的共享，原因是从 windows 10 某些版本开始禁用了 smb1.0，不过尝试从 windows 系统中启用 smb1.0 后，仍然不能正常工作，</p>
<p>最佳解决方案是，在 linux 系统中安装 wsdd，项目地址为：<a target="_blank" rel="noopener" href="https://github.com/christgau/wsdd">https://github.com/christgau/wsdd</a></p>
<p>安装后启动服务：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl start wsdd</span><br></pre></td></tr></table></figure>

<p>效果立竿见影</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://listenerri.com/2023/08/31/qtcreator-fakevim-%E8%87%AA%E5%8A%A8%E5%88%87%E6%8D%A2%E4%B8%AD%E8%8B%B1%E8%BE%93%E5%85%A5%E6%B3%95/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="listenerri">
      <meta itemprop="description" content="学的越多越发现会的越少 : )">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="listenerri's blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2023/08/31/qtcreator-fakevim-%E8%87%AA%E5%8A%A8%E5%88%87%E6%8D%A2%E4%B8%AD%E8%8B%B1%E8%BE%93%E5%85%A5%E6%B3%95/" class="post-title-link" itemprop="url">qtcreator fakevim 自动切换中英输入法</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2023-08-31 16:18:31 / 修改时间：16:44:30" itemprop="dateCreated datePublished" datetime="2023-08-31T16:18:31+08:00">2023-08-31</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/vim/" itemprop="url" rel="index"><span itemprop="name">vim</span></a>
                </span>
            </span>

          
            <span id="/2023/08/31/qtcreator-fakevim-%E8%87%AA%E5%8A%A8%E5%88%87%E6%8D%A2%E4%B8%AD%E8%8B%B1%E8%BE%93%E5%85%A5%E6%B3%95/" class="post-meta-item leancloud_visitors" data-flag-title="qtcreator fakevim 自动切换中英输入法" title="阅读次数">
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              <span class="post-meta-item-text">阅读次数：</span>
              <span class="leancloud-visitors-count"></span>
            </span>
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Valine：</span>
    
    <a title="valine" href="/2023/08/31/qtcreator-fakevim-%E8%87%AA%E5%8A%A8%E5%88%87%E6%8D%A2%E4%B8%AD%E8%8B%B1%E8%BE%93%E5%85%A5%E6%B3%95/#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/2023/08/31/qtcreator-fakevim-%E8%87%AA%E5%8A%A8%E5%88%87%E6%8D%A2%E4%B8%AD%E8%8B%B1%E8%BE%93%E5%85%A5%E6%B3%95/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>很久以前写过一篇<a href="https://listenerri.com/2018/11/04/qtcreator-fakevim-%E5%B0%8F%E4%BC%81%E9%B9%85%E8%BE%93%E5%85%A5%E6%B3%95%E8%87%AA%E5%8A%A8%E5%88%87%E6%8D%A2%E5%88%B0%E8%8B%B1%E6%96%87/">文章</a>介绍如何在 linux 下的 qtcreator 自动切换输入法，当时使用的方法比较简陋，而且只支持 linux，时过境迁，虽然 qtcreator 的 fakevim 插件功能仍然有限，但我搞出来了个跨平台的自动切换方案。</p>
<p>qtcreator fakevim 的配置文件中增加如下内容：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&quot; 自动切换输入法</span><br><span class="line">&quot; 需要将可执行脚本文件放到标准可执行目录下，如：/usr/local/bin/</span><br><span class="line">inoremap &lt;ESC&gt; &lt;ESC&gt;:!fakevim-smartim en&lt;CR&gt;</span><br><span class="line">nnoremap i :!fakevim-smartim re&lt;CR&gt;i</span><br><span class="line">nnoremap I :!fakevim-smartim re&lt;CR&gt;I</span><br><span class="line">nnoremap a :!fakevim-smartim re&lt;CR&gt;a</span><br><span class="line">nnoremap A :!fakevim-smartim re&lt;CR&gt;A</span><br><span class="line">nnoremap s :!fakevim-smartim re&lt;CR&gt;s</span><br><span class="line">nnoremap S :!fakevim-smartim re&lt;CR&gt;S</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>上述配置映射了些按键，在切换输入模式前，调用可执行程序 <code>fakevim-smartim</code>，这是我使用 golang 编写的一个小工具，源码：<a target="_blank" rel="noopener" href="https://github.com/listenerri/scripts/tree/master/bin-srcs/fakevim-smartim">https://github.com/listenerri/scripts/tree/master/bin-srcs/fakevim-smartim</a></p>
<p>有编译好的二进制可以直接下载：</p>
<ul>
<li>linux: <a target="_blank" rel="noopener" href="https://github.com/listenerri/scripts/raw/master/bin/linux/fakevim-smartim-linux">https://github.com/listenerri/scripts/raw/master/bin/linux/fakevim-smartim-linux</a></li>
<li>windows: <a target="_blank" rel="noopener" href="https://github.com/listenerri/scripts/raw/master/bin/win/fakevim-smartim-win.exe">https://github.com/listenerri/scripts/raw/master/bin/win/fakevim-smartim-win.exe</a></li>
<li>macos: <a target="_blank" rel="noopener" href="https://github.com/listenerri/scripts/raw/master/bin/macos/fakevim-smartim-darwin">https://github.com/listenerri/scripts/raw/master/bin/macos/fakevim-smartim-darwin</a></li>
</ul>
<p>将下载或自己编译好的二进制重命名为 <code>fakevim-smartim</code> 并放到系统的可执行程序目录下，也就是 PATH 环境变量中的任意目录。</p>
<p>其他依赖：</p>
<ul>
<li>linux 仅支持小企鹅输入法 fcitx，且依赖可执行程序 <code>fcitx5-remote</code>，这是较新版本的 fcitx 包中带有的命令，如果你使用的是旧版本的 fcitx，那么对应的应该是 <code>fcitx-remote</code>，可以修改 fakevim-smartim 的源码，将调用命令修改为 <code>fcitx-remote</code>，或者直接在 <code>fcitx-remote</code> 命令所在位置，创建一个符号链接 <code>ln -sf fcitx-remote fcitx5-remote</code>（未测试）。</li>
<li>windows 依赖另一个小工具：<code>im-select</code>，下载地址： <a target="_blank" rel="noopener" href="https://github.com/daipeihust/im-select/tree/master/win/out">https://github.com/daipeihust/im-select/tree/master/win/out</a></li>
<li>macos 同样依赖 <code>im-select</code>，下载地址： <a target="_blank" rel="noopener" href="https://github.com/daipeihust/im-select/tree/master/macOS/out">https://github.com/daipeihust/im-select/tree/master/macOS/out</a></li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://listenerri.com/2023/08/31/Win-%E4%B8%8B%E7%9A%84%E7%B1%BB-Linux-%E7%8E%AF%E5%A2%83%E5%BC%80%E5%8F%91-%E8%BF%90%E8%A1%8C%E7%8E%AF%E5%A2%83/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="listenerri">
      <meta itemprop="description" content="学的越多越发现会的越少 : )">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="listenerri's blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2023/08/31/Win-%E4%B8%8B%E7%9A%84%E7%B1%BB-Linux-%E7%8E%AF%E5%A2%83%E5%BC%80%E5%8F%91-%E8%BF%90%E8%A1%8C%E7%8E%AF%E5%A2%83/" class="post-title-link" itemprop="url">Win 下的类 Linux 环境开发/运行环境</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2023-08-31 16:04:31 / 修改时间：16:08:55" itemprop="dateCreated datePublished" datetime="2023-08-31T16:04:31+08:00">2023-08-31</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/linux/" itemprop="url" rel="index"><span itemprop="name">linux</span></a>
                </span>
            </span>

          
            <span id="/2023/08/31/Win-%E4%B8%8B%E7%9A%84%E7%B1%BB-Linux-%E7%8E%AF%E5%A2%83%E5%BC%80%E5%8F%91-%E8%BF%90%E8%A1%8C%E7%8E%AF%E5%A2%83/" class="post-meta-item leancloud_visitors" data-flag-title="Win 下的类 Linux 环境开发/运行环境" title="阅读次数">
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              <span class="post-meta-item-text">阅读次数：</span>
              <span class="leancloud-visitors-count"></span>
            </span>
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Valine：</span>
    
    <a title="valine" href="/2023/08/31/Win-%E4%B8%8B%E7%9A%84%E7%B1%BB-Linux-%E7%8E%AF%E5%A2%83%E5%BC%80%E5%8F%91-%E8%BF%90%E8%A1%8C%E7%8E%AF%E5%A2%83/#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/2023/08/31/Win-%E4%B8%8B%E7%9A%84%E7%B1%BB-Linux-%E7%8E%AF%E5%A2%83%E5%BC%80%E5%8F%91-%E8%BF%90%E8%A1%8C%E7%8E%AF%E5%A2%83/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="Cygwin"><a href="#Cygwin" class="headerlink" title="Cygwin"></a>Cygwin</h2><p>Cygwin 旨在通过一些 动态链接库（DLL），以 C 标准库的形式作为 API 兼容性层（转换为 Windows API 调用），提供一个完整的 POSIX 层，包括主流 Unix 的系统调用及库实现，以实现在 Windows 上直接编译和运行 Unix 程序，其重视兼容性优先于性能（这里的兼容性主要是 Unix 程序源码在此环境下编译时的兼容性）。</p>
<p>由于这样的实现方式，在 Cygwin 上开发/编译的程序，在运行时会依赖那些提供了兼容层的 DLL，也就是说需要将 Cygwin 的 DLL 随程序一起发布，才能在其他机器上运行。（这些程序不能完全算是 Windows 原生程序，因为需要 Cygwin 这个调用转换层。）（同时也由于需要转换层，所以说程序性能一般）</p>
<h2 id="MingGW"><a href="#MingGW" class="headerlink" title="MingGW"></a>MingGW</h2><p>MinGW 由 Cygwin 发展而来，着重简化与性能（主要提供 GUN 编译套件 gcc g++，而不是近 Unix/Linux 体验？），基于 MinGW 的程序是直接调用 Windows API 编译的（特指 C 语言？其他语言仍然依赖 GUN 运行时库？比如 libstdc++），得到的程序算是完全 Windows 原生的。</p>
<p>但 MinGW 只提供了 Win32 的 API，且不提供 POSIX API，所以大多数 GNU 软件无法在不修改源代码的情况下用 MinGW 编译。MinGW 也在 Linux 下提供了用于交叉编译到 Windows 的环境。</p>
<h2 id="Mingw-w64"><a href="#Mingw-w64" class="headerlink" title="Mingw-w64"></a>Mingw-w64</h2><p>Mingw-w64 是从 MinGW 分支出来的，主要用于扩展 MinGW 的特性，比如提供 64 位的开发、Win64 API、pthreads，但是同样不提供完整的 POSIX 兼容。</p>
<p>很多 Windows 下的 IDE 使用其作为默认的编译套件/工具链，比如 Clion、QtCreator 等等（这些 IDE 说什么也是不可能在内部打包一套微软的编译套件的）。</p>
<h2 id="MSYS2"><a href="#MSYS2" class="headerlink" title="MSYS2"></a>MSYS2</h2>
          <!--noindex-->
            <div class="post-button">
              <a class="btn" href="/2023/08/31/Win-%E4%B8%8B%E7%9A%84%E7%B1%BB-Linux-%E7%8E%AF%E5%A2%83%E5%BC%80%E5%8F%91-%E8%BF%90%E8%A1%8C%E7%8E%AF%E5%A2%83/#more" rel="contents">
                阅读全文 &raquo;
              </a>
            </div>
          <!--/noindex-->
        
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  


  
  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><span class="space">&hellip;</span><a class="page-number" href="/page/13/">13</a><a class="extend next" rel="next" href="/page/2/"><i class="fa fa-angle-right" aria-label="下一页"></i></a>
  </nav>



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="listenerri"
      src="/images/avatar.jpg">
  <p class="site-author-name" itemprop="name">listenerri</p>
  <div class="site-description" itemprop="description">学的越多越发现会的越少 : )</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">128</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">24</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">264</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/listenerri" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;listenerri" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:listenerri@gmail.com" title="E-Mail → mailto:listenerri@gmail.com" rel="noopener" target="_blank"><i class="fa fa-envelope fa-fw"></i>E-Mail</a>
      </span>
  </div>


  <div class="links-of-blogroll motion-element">
    <div class="links-of-blogroll-title"><i class="fa fa-link fa-fw"></i>
      Links
    </div>
    <ul class="links-of-blogroll-list">
        <li class="links-of-blogroll-item">
          <a href="http://blog.justforlxz.com/" title="http:&#x2F;&#x2F;blog.justforlxz.com" rel="noopener" target="_blank">竹子</a>
        </li>
        <li class="links-of-blogroll-item">
          <a href="https://blog.csdn.net/qq_33449307" title="https:&#x2F;&#x2F;blog.csdn.net&#x2F;qq_33449307" rel="noopener" target="_blank">DD</a>
        </li>
        <li class="links-of-blogroll-item">
          <a href="https://blog.csdn.net/itguangit" title="https:&#x2F;&#x2F;blog.csdn.net&#x2F;itguangit" rel="noopener" target="_blank">XiaoGuang</a>
        </li>
        <li class="links-of-blogroll-item">
          <a href="https://zhiqiu.top/" title="https:&#x2F;&#x2F;zhiqiu.top" rel="noopener" target="_blank">一叶知秋</a>
        </li>
        <li class="links-of-blogroll-item">
          <a href="http://www.mksoft.work/" title="http:&#x2F;&#x2F;www.mksoft.work" rel="noopener" target="_blank">YC</a>
        </li>
    </ul>
  </div>

      </div>
        <div class="back-to-top motion-element">
          <i class="fa fa-arrow-up"></i>
          <span>0%</span>
        </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 2016 – 
  <span itemprop="copyrightYear">2024</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">listenerri</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Gemini</a> 强力驱动
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>




  
  <script>
    (function(){
      var canonicalURL, curProtocol;
      //Get the <link> tag
      var x=document.getElementsByTagName("link");
		//Find the last canonical URL
		if(x.length > 0){
			for (i=0;i<x.length;i++){
				if(x[i].rel.toLowerCase() == 'canonical' && x[i].href){
					canonicalURL=x[i].href;
				}
			}
		}
    //Get protocol
	    if (!canonicalURL){
	    	curProtocol = window.location.protocol.split(':')[0];
	    }
	    else{
	    	curProtocol = canonicalURL.split(':')[0];
	    }
      //Get current URL if the canonical URL does not exist
	    if (!canonicalURL) canonicalURL = window.location.href;
	    //Assign script content. Replace current URL with the canonical URL
      !function(){var e=/([http|https]:\/\/[a-zA-Z0-9\_\.]+\.baidu\.com)/gi,r=canonicalURL,t=document.referrer;if(!e.test(r)){var n=(String(curProtocol).toLowerCase() === 'https')?"https://sp0.baidu.com/9_Q4simg2RQJ8t7jm9iCKT-xh_/s.gif":"//api.share.baidu.com/s.gif";t?(n+="?r="+encodeURIComponent(document.referrer),r&&(n+="&l="+r)):r&&(n+="?l="+r);var i=new Image;i.src=n}}(window);})();
  </script>




  
<script src="/js/local-search.js"></script>













  

  


<script>
NexT.utils.loadComments(document.querySelector('#valine-comments'), () => {
  NexT.utils.getScript('//unpkg.com/valine/dist/Valine.min.js', () => {
    var GUEST = ['nick', 'mail', 'link'];
    var guest = 'nick,mail,link';
    guest = guest.split(',').filter(item => {
      return GUEST.includes(item);
    });
    new Valine({
      el         : '#valine-comments',
      verify     : false,
      notify     : true,
      appId      : 'X0UkF88VBoXXbzI80WhmgIyF-gzGzoHsz',
      appKey     : 'CLyVWqSO30mL4Hg34jCGTheF',
      placeholder: "I have something to say",
      avatar     : 'mm',
      meta       : guest,
      pageSize   : '10' || 10,
      visitor    : true,
      lang       : 'zh-cn' || 'zh-cn',
      path       : location.pathname,
      recordIP   : false,
      serverURLs : ''
    });
  }, window.Valine);
});
</script>

</body>
</html>
