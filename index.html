<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.4.2">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/listenerri-favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/listenerri-favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/listenerri-favicon-16x16.png">
  <link rel="mask-icon" href="/images/listenerri-favicon-32x32.png" color="#222">
  <meta name="baidu-site-verification" content="eshpSLiJfj">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"listenerri.com","root":"/","scheme":"Gemini","version":"7.8.0","exturl":false,"sidebar":{"position":"right","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":true,"scrollpercent":true},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":true},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"path":"search.xml"};
  </script>

  <meta name="description" content="学的越多越发现会的越少 : )">
<meta property="og:type" content="website">
<meta property="og:title" content="listenerri&#39;s blog">
<meta property="og:url" content="https://listenerri.com/index.html">
<meta property="og:site_name" content="listenerri&#39;s blog">
<meta property="og:description" content="学的越多越发现会的越少 : )">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="listenerri">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="https://listenerri.com/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : true,
    isPost : false,
    lang   : 'zh-CN'
  };
</script>

  <title>listenerri's blog</title>
  


  <script>
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?f4f2d9354392e6db69ef67305fca0a31";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>




  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">listenerri's blog</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">学的越多越发现会的越少 : )</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-fw fa-home"></i>首页</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-fw fa-th"></i>分类</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-fw fa-tags"></i>标签</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-fw fa-archive"></i>归档</a>

  </li>
        <li class="menu-item menu-item-in-a-few-words">

    <a href="/in-a-few-words/" rel="section"><i class="fa fa-fw fa-list"></i>句不成章</a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/about/" rel="section"><i class="fa fa-fw fa-user"></i>关于</a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off"
           placeholder="搜索..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div id="search-result">
  <div id="no-result">
    <i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>
  </div>
</div>

    </div>
  </div>

</div>
    </header>

    


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content index posts-expand">
            
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://listenerri.com/2023/06/28/msys2-%E4%BF%AE%E6%94%B9%E9%BB%98%E8%AE%A4%E5%90%AF%E5%8A%A8%E4%BD%8D%E7%BD%AE/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="listenerri">
      <meta itemprop="description" content="学的越多越发现会的越少 : )">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="listenerri's blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2023/06/28/msys2-%E4%BF%AE%E6%94%B9%E9%BB%98%E8%AE%A4%E5%90%AF%E5%8A%A8%E4%BD%8D%E7%BD%AE/" class="post-title-link" itemprop="url">msys2 修改默认启动位置</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2023-06-28 10:36:21 / 修改时间：11:47:38" itemprop="dateCreated datePublished" datetime="2023-06-28T10:36:21+08:00">2023-06-28</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/msys2/" itemprop="url" rel="index"><span itemprop="name">msys2</span></a>
                </span>
            </span>

          
            <span id="/2023/06/28/msys2-%E4%BF%AE%E6%94%B9%E9%BB%98%E8%AE%A4%E5%90%AF%E5%8A%A8%E4%BD%8D%E7%BD%AE/" class="post-meta-item leancloud_visitors" data-flag-title="msys2 修改默认启动位置" title="阅读次数">
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              <span class="post-meta-item-text">阅读次数：</span>
              <span class="leancloud-visitors-count"></span>
            </span>
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="fa fa-comment-o"></i>
      </span>
      <span class="post-meta-item-text">Valine：</span>
    
    <a title="valine" href="/2023/06/28/msys2-%E4%BF%AE%E6%94%B9%E9%BB%98%E8%AE%A4%E5%90%AF%E5%8A%A8%E4%BD%8D%E7%BD%AE/#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/2023/06/28/msys2-%E4%BF%AE%E6%94%B9%E9%BB%98%E8%AE%A4%E5%90%AF%E5%8A%A8%E4%BD%8D%E7%BD%AE/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>msys2 为 windows 平台提供了大量 unix 命令，其基于 cygwin 同时带来了更多更强大的特性，是个很赞的项目。</p>
<p>msys2 默认提供了几个不同的环境：</p>
<ul>
<li>msys</li>
<li>mingw64</li>
<li>mingw32</li>
<li>ucrt64</li>
<li>clang64</li>
<li>clangarm64</li>
</ul>
<p>其中 msys 环境是其他几个环境共用的基础环境，出于兼容性考虑，我一般使用 mingw64 环境，安装新的软件包时，也是找 <code>mingw-w64-x86_64-</code> 开头的包，这个软件包的前缀很重要，如果在 mingw64 环境下，安装了 <code>mingw-w64-ucrt-x86_64-</code> 开头的包，是找不到新装包的命令的，必须要到 ucrt64 环境下才能找到。</p>
<p>关于各个环境的主要区别，可以阅读官方文档：<a target="_blank" rel="noopener" href="https://www.msys2.org/docs/environments/">https://www.msys2.org/docs/environments/</a></p>
<p>书回正传，这里先假设我的 windows 账户名称是 <code>ri</code>，那么我在 windows 系统中的账户主文件夹/主目录会是 <code>C:\Users\ri</code> 目录。后续出现 <code>ri</code> 时，请注意替换理解。</p>
<p>msys2 使用了自己的 unix 风格目录结构，其 unix 根目录 <code>/</code> 默认是 msys2 在 windows 下载的安装目录，如果安装 msys2 过程中没有主动修改的话，那就是 <code>C:\msys64</code> 目录。</p>
<p>另外，msys2 会把 windows 不同的本地磁盘，以盘符为名字，“挂载”到 unix 根目录 <code>/</code> 下，比如 windows 的 C 盘，会被挂载在 unix 的 <code>/c</code> 目录上，windows D 盘同理。</p>
<p>而 msys2 默认的 unix 家(HOME)目录则是 <code>/home/ri</code>，注意这里的 <code>/home/ri</code> 并不是 <code>C:\Users\ri</code> 目录。</p>
<p>启动 mingw64 环境时，默认是从 unix 家目录启动的，这对我来说有些不方便，我希望每次启动后所在目录都是 windows 账户的主目录  <code>C:\Users\ri</code>。同时还要保留 msys2 的 unix 家目录，以便将 msys2 相关的各种配置文件，独立放置在 msys2 自己的目录体系内。</p>
          <!--noindex-->
            <div class="post-button">
              <a class="btn" href="/2023/06/28/msys2-%E4%BF%AE%E6%94%B9%E9%BB%98%E8%AE%A4%E5%90%AF%E5%8A%A8%E4%BD%8D%E7%BD%AE/#more" rel="contents">
                阅读全文 &raquo;
              </a>
            </div>
          <!--/noindex-->
        
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://listenerri.com/2023/06/26/vscodevim-%E5%9C%A8-wsl-%E8%BF%9C%E7%A8%8B%E5%BC%80%E5%8F%91%E6%A8%A1%E5%BC%8F%E4%B8%8B%E6%97%A0%E6%B3%95%E8%87%AA%E5%8A%A8%E5%88%87%E6%8D%A2%E8%BE%93%E5%85%A5%E6%B3%95/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="listenerri">
      <meta itemprop="description" content="学的越多越发现会的越少 : )">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="listenerri's blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2023/06/26/vscodevim-%E5%9C%A8-wsl-%E8%BF%9C%E7%A8%8B%E5%BC%80%E5%8F%91%E6%A8%A1%E5%BC%8F%E4%B8%8B%E6%97%A0%E6%B3%95%E8%87%AA%E5%8A%A8%E5%88%87%E6%8D%A2%E8%BE%93%E5%85%A5%E6%B3%95/" class="post-title-link" itemprop="url">vscodevim 在 wsl 远程开发模式下无法自动切换输入法</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2023-06-26 00:01:17 / 修改时间：10:34:11" itemprop="dateCreated datePublished" datetime="2023-06-26T00:01:17+08:00">2023-06-26</time>
            </span>

          
            <span id="/2023/06/26/vscodevim-%E5%9C%A8-wsl-%E8%BF%9C%E7%A8%8B%E5%BC%80%E5%8F%91%E6%A8%A1%E5%BC%8F%E4%B8%8B%E6%97%A0%E6%B3%95%E8%87%AA%E5%8A%A8%E5%88%87%E6%8D%A2%E8%BE%93%E5%85%A5%E6%B3%95/" class="post-meta-item leancloud_visitors" data-flag-title="vscodevim 在 wsl 远程开发模式下无法自动切换输入法" title="阅读次数">
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              <span class="post-meta-item-text">阅读次数：</span>
              <span class="leancloud-visitors-count"></span>
            </span>
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="fa fa-comment-o"></i>
      </span>
      <span class="post-meta-item-text">Valine：</span>
    
    <a title="valine" href="/2023/06/26/vscodevim-%E5%9C%A8-wsl-%E8%BF%9C%E7%A8%8B%E5%BC%80%E5%8F%91%E6%A8%A1%E5%BC%8F%E4%B8%8B%E6%97%A0%E6%B3%95%E8%87%AA%E5%8A%A8%E5%88%87%E6%8D%A2%E8%BE%93%E5%85%A5%E6%B3%95/#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/2023/06/26/vscodevim-%E5%9C%A8-wsl-%E8%BF%9C%E7%A8%8B%E5%BC%80%E5%8F%91%E6%A8%A1%E5%BC%8F%E4%B8%8B%E6%97%A0%E6%B3%95%E8%87%AA%E5%8A%A8%E5%88%87%E6%8D%A2%E8%BE%93%E5%85%A5%E6%B3%95/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>vscode 下的 vim 扩展插件(<a target="_blank" rel="noopener" href="https://github.com/VSCodeVim/Vim">vscodevim</a>) 在 windows 下使用 wsl/ssh 远程开发时，设置的自动切换 windows 输入法无效，分析了下源码发现跟自动切换输入法相关的几个设置项，其 scope 被设置为了 machine：</p>
<p><a target="_blank" rel="noopener" href="https://github.com/VSCodeVim/Vim/blob/15dbe0b415f269a5be14dc74651a69b9334fba14/package.json#L1064">https://github.com/VSCodeVim/Vim/blob/15dbe0b415f269a5be14dc74651a69b9334fba14/package.json#L1064</a></p>
<p>涉及到的设置项有：</p>
<ul>
<li>vim.autoSwitchInputMethod.defaultIM</li>
<li>vim.autoSwitchInputMethod.switchIMCmd</li>
<li>vim.autoSwitchInputMethod.obtainIMCmd</li>
</ul>
<p>翻阅 vscode 插件开发文档后了解到，当某个配置项的 scope 属性被设置为 machine 时，这意味着此配置项只在 vscode 核心具体工作的那台机器上生效，本地开发时自然是读取正常，但当进行 wsl/ssh 远程开发时，vscode 真正的核心(vscode-server)是在远程主机里工作的，本地可见的 vscode 只是个客户端或者说个空外壳，所以上述几个配置应该在远程主机中设置。</p>
<p>同时 vim 扩展插件的插件类型(extensionKind)被设置为了 ui 类，也就是说 vim 插件只工作 vscode UI 所在的地方，即只工作在客户端/空外壳上。</p>
<p>综上所述，进行远程开发时，vim 插件(其他插件也是这样)中提供的配置项，scope 属性为 machine 的配置需要在远程主机中设置，vscode 提供了这种操作的界面，如下图所示：</p>
<p><img src="./remote-vim-settings.png" alt="remote-vim-settings"></p>
<p>需要注意的是，设置项的值应该跟在 windows 本地做开发的值是一样的，因为 vim 插件只工作在本地，只是需要从远程主机上读取这些配置(这一点设计的很奇怪)。</p>
<p>另外吐槽几句，vscodevim 这个插件目前是 vscode 中提供 vim 功能最完整的插件了，但是感觉 github 上的项目管理者对 PR 的审核很草率，经常引入进来新的 bug，让人头大。</p>
          <!--noindex-->
            <div class="post-button">
              <a class="btn" href="/2023/06/26/vscodevim-%E5%9C%A8-wsl-%E8%BF%9C%E7%A8%8B%E5%BC%80%E5%8F%91%E6%A8%A1%E5%BC%8F%E4%B8%8B%E6%97%A0%E6%B3%95%E8%87%AA%E5%8A%A8%E5%88%87%E6%8D%A2%E8%BE%93%E5%85%A5%E6%B3%95/#more" rel="contents">
                阅读全文 &raquo;
              </a>
            </div>
          <!--/noindex-->
        
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://listenerri.com/2023/06/25/windows-%E4%B8%8B-vscode-%E4%BD%BF%E7%94%A8-msys2-mingw64-%E4%BD%9C%E4%B8%BA%E9%BB%98%E8%AE%A4-shell-%E6%97%B6%E8%AF%86%E5%88%AB%E8%B7%AF%E5%BE%84%E5%A4%B1%E8%B4%A5/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="listenerri">
      <meta itemprop="description" content="学的越多越发现会的越少 : )">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="listenerri's blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2023/06/25/windows-%E4%B8%8B-vscode-%E4%BD%BF%E7%94%A8-msys2-mingw64-%E4%BD%9C%E4%B8%BA%E9%BB%98%E8%AE%A4-shell-%E6%97%B6%E8%AF%86%E5%88%AB%E8%B7%AF%E5%BE%84%E5%A4%B1%E8%B4%A5/" class="post-title-link" itemprop="url">windows 下 vscode 使用 msys2 mingw64 作为默认 shell 时识别路径失败</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2023-06-25 23:28:50 / 修改时间：23:54:51" itemprop="dateCreated datePublished" datetime="2023-06-25T23:28:50+08:00">2023-06-25</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/vscode/" itemprop="url" rel="index"><span itemprop="name">vscode</span></a>
                </span>
            </span>

          
            <span id="/2023/06/25/windows-%E4%B8%8B-vscode-%E4%BD%BF%E7%94%A8-msys2-mingw64-%E4%BD%9C%E4%B8%BA%E9%BB%98%E8%AE%A4-shell-%E6%97%B6%E8%AF%86%E5%88%AB%E8%B7%AF%E5%BE%84%E5%A4%B1%E8%B4%A5/" class="post-meta-item leancloud_visitors" data-flag-title="windows 下 vscode 使用 msys2 mingw64 作为默认 shell 时识别路径失败" title="阅读次数">
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              <span class="post-meta-item-text">阅读次数：</span>
              <span class="leancloud-visitors-count"></span>
            </span>
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="fa fa-comment-o"></i>
      </span>
      <span class="post-meta-item-text">Valine：</span>
    
    <a title="valine" href="/2023/06/25/windows-%E4%B8%8B-vscode-%E4%BD%BF%E7%94%A8-msys2-mingw64-%E4%BD%9C%E4%B8%BA%E9%BB%98%E8%AE%A4-shell-%E6%97%B6%E8%AF%86%E5%88%AB%E8%B7%AF%E5%BE%84%E5%A4%B1%E8%B4%A5/#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/2023/06/25/windows-%E4%B8%8B-vscode-%E4%BD%BF%E7%94%A8-msys2-mingw64-%E4%BD%9C%E4%B8%BA%E9%BB%98%E8%AE%A4-shell-%E6%97%B6%E8%AF%86%E5%88%AB%E8%B7%AF%E5%BE%84%E5%A4%B1%E8%B4%A5/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>这两天遇到一个 vscode 下 vim 插件的问题（另写一篇文章详述），按照 <a target="_blank" rel="noopener" href="https://github.com/VSCodeVim/Vim/blob/master/.github/CONTRIBUTING.md#first-time-setup">vscodevim</a> 扩展的构建文档尝试本地调试时，发现无法编译，报如下错误：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">正在执行任务: node_modules\.bin\gulp.cmd build-dev</span><br><span class="line">bash: node_modules.bingulp.cmd: 未找到命令</span><br><span class="line">终端进程“C:\msys64\usr\bin\bash.exe &#x27;--login&#x27;, &#x27;-i&#x27;, &#x27;-c&#x27;, &#x27;node_modules\.bin\gulp.cmd build-dev&#x27;”已终止，退出代码: 127。</span><br></pre></td></tr></table></figure>

<p>可以看出来是命令找不到，但第二行的报错很奇怪，丢失了 windows 风格路径分隔符 <code>\</code>，查看 vscode 的终端配置发现，我把默认集成终端设置成了 msys2，那么问题很明确了，是因为 msys2 中的 bash 命令不支持 windows 风格的路径分隔符，将其解析为了转义符导致的。</p>
<p>在网上几番搜索皆无果，没有优雅的解决方案，还趁着这个机会认真学习了 vscode 的 launch.json, tasks.json, task provider 等文档，对问题有了一个更深入的了解。</p>
<p>我目前遇到的问题是因为 vscode 自带的 gulp task provider 导致的，当其发现 vscode 在 windows 下运行时，就生成 windows 风格的 gulp 命令路径参数，这在 vscode 使用 cmd 或 powershell 作为默认集成终端时没有问题，但对使用了 bash 作为 shell 的情况就会导致出错了，vscode 的 github 仓库里有几个类似、相关的，已经被关闭并锁定了的 issues:</p>
<p><a target="_blank" rel="noopener" href="https://github.com/microsoft/vscode/issues/35593">https://github.com/microsoft/vscode/issues/35593</a></p>
<p><a target="_blank" rel="noopener" href="https://github.com/microsoft/vscode/issues/48149">https://github.com/microsoft/vscode/issues/48149</a></p>
<p><a target="_blank" rel="noopener" href="https://github.com/microsoft/vscode/issues/40954">https://github.com/microsoft/vscode/issues/40954</a></p>
<p>无意间从 <a target="_blank" rel="noopener" href="https://stackoverflow.com/a/49779607/7059407">这篇回答中找到了灵感</a>，所以有了如下解决方案，修改 vscode 的配置文件 settings.json，在对集成终端的配置中添加一个自定义终端配置，并将其设置为默认终端：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">&quot;terminal.integrated.profiles.windows&quot;: &#123;</span><br><span class="line">    &quot;bash (MINGW64-MSYS2)&quot;: &#123;</span><br><span class="line">        &quot;path&quot;: &quot;C:\\msys64\\usr\\bin\\bash.exe&quot;,</span><br><span class="line">        &quot;args&quot;: [</span><br><span class="line">            &quot;--login&quot;,</span><br><span class="line">            &quot;-i&quot;,</span><br><span class="line">            &quot;-c&quot;,</span><br><span class="line">            &quot;if [ -z \&quot;$@\&quot; ]; then bash; else eval \&quot;$(cygpath \&quot;$@\&quot;)\&quot;; fi&quot;</span><br><span class="line">        ],</span><br><span class="line">        &quot;env&quot;: &#123;</span><br><span class="line">            &quot;CHERE_INVOKING&quot;: &quot;1&quot;,</span><br><span class="line">            &quot;MSYSTEM&quot;: &quot;MINGW64&quot;,</span><br><span class="line">            &quot;MSYS2_PATH_TYPE&quot;: &quot;inherit&quot;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    // other terminal profiles</span><br><span class="line">    // ....</span><br><span class="line">&#125;,</span><br><span class="line">&quot;terminal.integrated.defaultProfile.windows&quot;: &quot;bash (MINGW64-MSYS2)&quot;,</span><br></pre></td></tr></table></figure>
          <!--noindex-->
            <div class="post-button">
              <a class="btn" href="/2023/06/25/windows-%E4%B8%8B-vscode-%E4%BD%BF%E7%94%A8-msys2-mingw64-%E4%BD%9C%E4%B8%BA%E9%BB%98%E8%AE%A4-shell-%E6%97%B6%E8%AF%86%E5%88%AB%E8%B7%AF%E5%BE%84%E5%A4%B1%E8%B4%A5/#more" rel="contents">
                阅读全文 &raquo;
              </a>
            </div>
          <!--/noindex-->
        
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://listenerri.com/2023/06/12/%E5%85%B3%E4%BA%8E-vspd-%E4%B8%AD%E7%9A%84%E5%87%A0%E4%B8%AA%E6%A8%A1%E5%BC%8F/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="listenerri">
      <meta itemprop="description" content="学的越多越发现会的越少 : )">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="listenerri's blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2023/06/12/%E5%85%B3%E4%BA%8E-vspd-%E4%B8%AD%E7%9A%84%E5%87%A0%E4%B8%AA%E6%A8%A1%E5%BC%8F/" class="post-title-link" itemprop="url">关于 vspd 中的几个模式</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2023-06-12 14:14:39 / 修改时间：14:20:00" itemprop="dateCreated datePublished" datetime="2023-06-12T14:14:39+08:00">2023-06-12</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/others/" itemprop="url" rel="index"><span itemprop="name">others</span></a>
                </span>
            </span>

          
            <span id="/2023/06/12/%E5%85%B3%E4%BA%8E-vspd-%E4%B8%AD%E7%9A%84%E5%87%A0%E4%B8%AA%E6%A8%A1%E5%BC%8F/" class="post-meta-item leancloud_visitors" data-flag-title="关于 vspd 中的几个模式" title="阅读次数">
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              <span class="post-meta-item-text">阅读次数：</span>
              <span class="leancloud-visitors-count"></span>
            </span>
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="fa fa-comment-o"></i>
      </span>
      <span class="post-meta-item-text">Valine：</span>
    
    <a title="valine" href="/2023/06/12/%E5%85%B3%E4%BA%8E-vspd-%E4%B8%AD%E7%9A%84%E5%87%A0%E4%B8%AA%E6%A8%A1%E5%BC%8F/#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/2023/06/12/%E5%85%B3%E4%BA%8E-vspd-%E4%B8%AD%E7%9A%84%E5%87%A0%E4%B8%AA%E6%A8%A1%E5%BC%8F/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>vspd 全称虚拟串口驱动，官方也没有给出很详细的文档，这里仅记录一些自己的理解</p>
<p>测试版本：vspd-v9.0，我主要用来创建虚拟串口以供测试使用</p>
<h2 id="模式-Pairing"><a href="#模式-Pairing" class="headerlink" title="模式 Pairing"></a>模式 Pairing</h2><p>可成对得创建相互连通的虚拟 COM 口，仅能选择新的虚拟 COM 口进行创建，不能使用已存在的 COM 口</p>
<p>举例：<br>创建 COM100 与 COM101 作为 Pairing，使用串口工具打开两个 COM 口，可以互发数据</p>
<h2 id="模式-Split"><a href="#模式-Split" class="headerlink" title="模式 Split"></a>模式 Split</h2><p>将一个真实 COM 串口 split 为多个虚拟 COM 口<br>在这种情况下，被 split 的真实 COM 口接收到的所有数据都会发送到每个 split 出来的虚拟 COM 口<br>反之亦然，即每个 split 出来的虚拟 COM 口接收到的所有数据，都会发送到真实 COM 口</p>
<p>注意，一旦设置生效，则被 split 的真实 COM 口将始终处于被占用状态，其他串口调试工具将无法再次打开它，split 出来的虚拟 COM 口则必须是新创建的，不能是已存在的 COM 口</p>
<p>举例：<br>电脑上存在一个真实 COM 口名为 COM1，将其在 Split 模式下拆分到新的 2 个虚拟 COM 口：COM100 和 COM101，当 COM1 （从外部）接收到数据时，COM100 和 COM101 也都能接收到同样的数据<br>反过来，当 COM100 或 COM101 接收到数据时，COM1 也将接收到同样的数据</p>
<p>注：<br>所以 COM100 和 COM101 都相当于是 COM1 的引用？<br>并发问题？</p>
          <!--noindex-->
            <div class="post-button">
              <a class="btn" href="/2023/06/12/%E5%85%B3%E4%BA%8E-vspd-%E4%B8%AD%E7%9A%84%E5%87%A0%E4%B8%AA%E6%A8%A1%E5%BC%8F/#more" rel="contents">
                阅读全文 &raquo;
              </a>
            </div>
          <!--/noindex-->
        
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://listenerri.com/2022/10/30/wireshark-filter-Manual-Page/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="listenerri">
      <meta itemprop="description" content="学的越多越发现会的越少 : )">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="listenerri's blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/10/30/wireshark-filter-Manual-Page/" class="post-title-link" itemprop="url">wireshark-filter-Manual-Page</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2022-10-30 01:16:51 / 修改时间：18:53:07" itemprop="dateCreated datePublished" datetime="2022-10-30T01:16:51+08:00">2022-10-30</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/translation/" itemprop="url" rel="index"><span itemprop="name">translation</span></a>
                </span>
            </span>

          
            <span id="/2022/10/30/wireshark-filter-Manual-Page/" class="post-meta-item leancloud_visitors" data-flag-title="wireshark-filter-Manual-Page" title="阅读次数">
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              <span class="post-meta-item-text">阅读次数：</span>
              <span class="leancloud-visitors-count"></span>
            </span>
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="fa fa-comment-o"></i>
      </span>
      <span class="post-meta-item-text">Valine：</span>
    
    <a title="valine" href="/2022/10/30/wireshark-filter-Manual-Page/#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/2022/10/30/wireshark-filter-Manual-Page/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="NAME"><a href="#NAME" class="headerlink" title="NAME"></a>NAME</h1><p>wireshark-filter - Wireshark display filter 显示过滤器语法手册</p>
<h1 id="SYNOPSIS"><a href="#SYNOPSIS" class="headerlink" title="SYNOPSIS"></a>SYNOPSIS</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">wireshark [other options] [ -Y &quot;display filter expression&quot; | --display-filter &quot;display filter expression&quot; ]</span><br><span class="line"></span><br><span class="line">tshark [other options] [ -Y &quot;display filter expression&quot; | --display-filter &quot;display filter expression&quot; ]</span><br></pre></td></tr></table></figure>


<h1 id="DESCRIPTION"><a href="#DESCRIPTION" class="headerlink" title="DESCRIPTION"></a>DESCRIPTION</h1><p>Wireshark 和 TShark 共享一个强大的过滤引擎，有助于从数据包列表中去除“噪音”，只看到您感兴趣的数据包。如果一个数据包符合你的过滤器中表达的要求，那么它就会显示在数据包列表中。显示过滤器可让您将协议中的字段与特定值进行比较，将字段与字段进行比较，并检查指定字段或协议是否存在。</p>
<p>过滤器也被其他功能所使用，如统计数据的生成和数据包列表的着色（后者只对Wireshark有效）。本手册页描述了它们的语法。可以在 Wireshark 和 <a target="_blank" rel="noopener" href="https://www.wireshark.org/docs/dfref/">https://www.wireshark.org/docs/dfref/</a> 的显示过滤器参考中找到过滤器字段的全部参考文档。</p>
<h1 id="FILTER-语法"><a href="#FILTER-语法" class="headerlink" title="FILTER 语法"></a>FILTER 语法</h1><h2 id="判断一个字段或者协议是否存在"><a href="#判断一个字段或者协议是否存在" class="headerlink" title="判断一个字段或者协议是否存在"></a>判断一个字段或者协议是否存在</h2><p>最简单的过滤器允许您检查协议或字段是否存在。如果您想查看所有包含 IP 协议的数据包，过滤器将是 <code>ip</code>。要查看包含 Token-Ring RIF 字段的所有数据包，请使用 <code>tr.rif</code>。</p>
          <!--noindex-->
            <div class="post-button">
              <a class="btn" href="/2022/10/30/wireshark-filter-Manual-Page/#more" rel="contents">
                阅读全文 &raquo;
              </a>
            </div>
          <!--/noindex-->
        
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://listenerri.com/2022/07/16/linux-%E5%8E%9F%E5%A7%8B%E5%A5%97%E6%8E%A5%E5%AD%97%E6%94%B6%E5%8F%91-packet/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="listenerri">
      <meta itemprop="description" content="学的越多越发现会的越少 : )">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="listenerri's blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/07/16/linux-%E5%8E%9F%E5%A7%8B%E5%A5%97%E6%8E%A5%E5%AD%97%E6%94%B6%E5%8F%91-packet/" class="post-title-link" itemprop="url">linux 原始套接字收发 packet</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2022-07-16 16:10:31" itemprop="dateCreated datePublished" datetime="2022-07-16T16:10:31+08:00">2022-07-16</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2022-10-30 00:51:37" itemprop="dateModified" datetime="2022-10-30T00:51:37+08:00">2022-10-30</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/translation/" itemprop="url" rel="index"><span itemprop="name">translation</span></a>
                </span>
            </span>

          
            <span id="/2022/07/16/linux-%E5%8E%9F%E5%A7%8B%E5%A5%97%E6%8E%A5%E5%AD%97%E6%94%B6%E5%8F%91-packet/" class="post-meta-item leancloud_visitors" data-flag-title="linux 原始套接字收发 packet" title="阅读次数">
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              <span class="post-meta-item-text">阅读次数：</span>
              <span class="leancloud-visitors-count"></span>
            </span>
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="fa fa-comment-o"></i>
      </span>
      <span class="post-meta-item-text">Valine：</span>
    
    <a title="valine" href="/2022/07/16/linux-%E5%8E%9F%E5%A7%8B%E5%A5%97%E6%8E%A5%E5%AD%97%E6%94%B6%E5%8F%91-packet/#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/2022/07/16/linux-%E5%8E%9F%E5%A7%8B%E5%A5%97%E6%8E%A5%E5%AD%97%E6%94%B6%E5%8F%91-packet/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>近期工作接触到了些 linux 在 OSI 二层（数据链路层）使用 ethernet 协议收发数据包的内容，网上搜罗了一些有用的文档：</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://austinmarton.wordpress.com/2011/09/14/sending-raw-ethernet-packets-from-a-specific-interface-in-c-on-linux/">https://austinmarton.wordpress.com/2011/09/14/sending-raw-ethernet-packets-from-a-specific-interface-in-c-on-linux/</a></li>
<li><a target="_blank" rel="noopener" href="https://www.binarytides.com/raw-sockets-c-code-linux/">https://www.binarytides.com/raw-sockets-c-code-linux/</a></li>
<li><a target="_blank" rel="noopener" href="https://squidarth.com/networking/systems/rc/2018/05/28/using-raw-sockets.html">https://squidarth.com/networking/systems/rc/2018/05/28/using-raw-sockets.html</a></li>
<li><a target="_blank" rel="noopener" href="https://stackoverflow.com/questions/14774668/what-is-raw-socket-in-socket-programming">https://stackoverflow.com/questions/14774668/what-is-raw-socket-in-socket-programming</a></li>
<li><a target="_blank" rel="noopener" href="https://www.tenouk.com/Module43a.html">https://www.tenouk.com/Module43a.html</a></li>
<li>推荐： <a target="_blank" rel="noopener" href="https://www.opensourceforu.com/2015/03/a-guide-to-using-raw-sockets/">https://www.opensourceforu.com/2015/03/a-guide-to-using-raw-sockets/</a></li>
<li>推荐： <a target="_blank" rel="noopener" href="https://github.com/xgfone/snippet/blob/master/snippet/docs/linux/program/raw-socket.md">https://github.com/xgfone/snippet/blob/master/snippet/docs/linux/program/raw-socket.md</a></li>
<li>推荐： <a target="_blank" rel="noopener" href="https://man7.org/linux/man-pages/man7/packet.7.html">https://man7.org/linux/man-pages/man7/packet.7.html</a></li>
<li>推荐(上面链接的中文翻译)： <a target="_blank" rel="noopener" href="https://manpages.debian.org/unstable/manpages-zh/packet.7.zh_CN.html">https://manpages.debian.org/unstable/manpages-zh/packet.7.zh_CN.html</a></li>
</ul>
<p>另外有一些第三方库也可以做到处理链路层数据：</p>
<ul>
<li>libpcap 第三方 c 开发文档： <a target="_blank" rel="noopener" href="https://www.devdungeon.com/content/using-libpcap-c">https://www.devdungeon.com/content/using-libpcap-c</a></li>
<li>libpcap 官方 c 开发文档： <a target="_blank" rel="noopener" href="https://www.tcpdump.org/pcap.html">https://www.tcpdump.org/pcap.html</a></li>
<li>libpcap： <a target="_blank" rel="noopener" href="https://ruofeng.me/2018/04/23/use-libpcap-to-send-and-capture/">https://ruofeng.me/2018/04/23/use-libpcap-to-send-and-capture/</a></li>
<li>libnet 库： <a target="_blank" rel="noopener" href="https://github.com/libnet/libnet">https://github.com/libnet/libnet</a></li>
<li>libnet 库： <a target="_blank" rel="noopener" href="https://codedocs.xyz/libnet/libnet/globals.html">https://codedocs.xyz/libnet/libnet/globals.html</a></li>
</ul>
<p>下面是我对 linux man 手册 packet(7) 的翻译，虽然上面已有相关中文翻译的链接，但我个人认为有部分相关术语使用得不太合适，另外我自己再翻译一边也可以加深我个人理解。</p>
<h1 id="NAME"><a href="#NAME" class="headerlink" title="NAME"></a>NAME</h1><p>packet - 设备层的 packet 接口</p>
<h1 id="SYNOPSIS-概要"><a href="#SYNOPSIS-概要" class="headerlink" title="SYNOPSIS 概要"></a>SYNOPSIS 概要</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">#include &lt;sys/socket.h&gt;</span><br><span class="line">#include &lt;linux/if_packet.h&gt;</span><br><span class="line">#include &lt;net/ethernet.h&gt; /* the L2 protocols */</span><br><span class="line"></span><br><span class="line">packet_socket = socket(AF_PACKET, int socket_type, int protocol);</span><br></pre></td></tr></table></figure>

<h1 id="DESCRIPTION-描述"><a href="#DESCRIPTION-描述" class="headerlink" title="DESCRIPTION 描述"></a>DESCRIPTION 描述</h1>
          <!--noindex-->
            <div class="post-button">
              <a class="btn" href="/2022/07/16/linux-%E5%8E%9F%E5%A7%8B%E5%A5%97%E6%8E%A5%E5%AD%97%E6%94%B6%E5%8F%91-packet/#more" rel="contents">
                阅读全文 &raquo;
              </a>
            </div>
          <!--/noindex-->
        
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://listenerri.com/2021/09/10/Qtcreator-Fakevim-%E6%98%A0%E5%B0%84-%E5%AF%84%E5%AD%98%E5%99%A8%E4%B8%8D%E7%94%9F%E6%95%88/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="listenerri">
      <meta itemprop="description" content="学的越多越发现会的越少 : )">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="listenerri's blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2021/09/10/Qtcreator-Fakevim-%E6%98%A0%E5%B0%84-%E5%AF%84%E5%AD%98%E5%99%A8%E4%B8%8D%E7%94%9F%E6%95%88/" class="post-title-link" itemprop="url">Qtcreator Fakevim 映射 + 寄存器不生效</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2021-09-10 17:53:00" itemprop="dateCreated datePublished" datetime="2021-09-10T17:53:00+08:00">2021-09-10</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2022-10-30 00:51:37" itemprop="dateModified" datetime="2022-10-30T00:51:37+08:00">2022-10-30</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/qt/" itemprop="url" rel="index"><span itemprop="name">qt</span></a>
                </span>
            </span>

          
            <span id="/2021/09/10/Qtcreator-Fakevim-%E6%98%A0%E5%B0%84-%E5%AF%84%E5%AD%98%E5%99%A8%E4%B8%8D%E7%94%9F%E6%95%88/" class="post-meta-item leancloud_visitors" data-flag-title="Qtcreator Fakevim 映射 + 寄存器不生效" title="阅读次数">
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              <span class="post-meta-item-text">阅读次数：</span>
              <span class="leancloud-visitors-count"></span>
            </span>
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="fa fa-comment-o"></i>
      </span>
      <span class="post-meta-item-text">Valine：</span>
    
    <a title="valine" href="/2021/09/10/Qtcreator-Fakevim-%E6%98%A0%E5%B0%84-%E5%AF%84%E5%AD%98%E5%99%A8%E4%B8%8D%E7%94%9F%E6%95%88/#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/2021/09/10/Qtcreator-Fakevim-%E6%98%A0%E5%B0%84-%E5%AF%84%E5%AD%98%E5%99%A8%E4%B8%8D%E7%94%9F%E6%95%88/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>在 QtCreator 使用 Fakevim 可以指定读取配置文件，在配置文件中映射按键，我发现当映射 <code>+</code> 寄存器时（也就是系统剪切板）不生效，比如下面这行命令：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">map &lt;Space&gt;yy &quot;+yy</span><br></pre></td></tr></table></figure>

<p>尝试了很多方法，比如转义：<code>\&quot;+yy</code> 等都不行，网上也搜不到相关问题，下载了 QtCreator 的源码后，分析 Fakevim 插件解析配置文件的部分，发现是一个 Bug，相关代码如下：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">// qt-creator/src/plugins/fakevim/fakevimhandler.cpp</span><br><span class="line">// bool FakeVimHandler::Private::handleExSourceCommand(const ExCommand &amp;cmd)</span><br><span class="line"></span><br><span class="line">//  remove comment</span><br><span class="line">int i = nextline.lastIndexOf(&#x27;&quot;&#x27;);</span><br><span class="line">if (i != -1)</span><br><span class="line">    nextline = nextline.remove(i, nextline.size() - i);</span><br></pre></td></tr></table></figure>

<p>原来是判断 <code>&quot;</code> 号是配置文件注释，将 <code>&quot;</code> 号开始到结尾的部分给删除了，已经给 QtCreator 官方提了 Issue，说实话我也没想到修复这个问题的好方法。</p>
<p>另辟蹊径，既然要判断 <code>&quot;</code> 号，而且代码里是判断最后一个 <code>&quot;</code> 号的位置，那就给它加上个行内注释，让它不删除命令内容就行，比如还是上面的命令，修改后如下：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">map &lt;Space&gt;yy &quot;+yy &quot; placehoder commend for a Fakevim parse bug</span><br></pre></td></tr></table></figure>

<p>这样源码删除后面的注释后，剩下的就是原本想要执行的命令了，搞定 :)</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://listenerri.com/2021/08/30/%E5%A0%86%E6%8E%92%E5%BA%8F%EF%BC%88%E5%AE%8C%E5%85%A8%E4%BA%8C%E5%8F%89%E6%A0%91%EF%BC%89%E6%9C%80%E5%90%8E%E4%B8%80%E4%B8%AA%E9%9D%9E%E5%8F%B6%E5%AD%90%E8%8A%82%E7%82%B9%E7%9A%84%E5%BA%8F%E5%8F%B7%E6%98%AF-n-2-1-%E7%9A%84%E5%8E%9F%E5%9B%A0/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="listenerri">
      <meta itemprop="description" content="学的越多越发现会的越少 : )">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="listenerri's blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2021/08/30/%E5%A0%86%E6%8E%92%E5%BA%8F%EF%BC%88%E5%AE%8C%E5%85%A8%E4%BA%8C%E5%8F%89%E6%A0%91%EF%BC%89%E6%9C%80%E5%90%8E%E4%B8%80%E4%B8%AA%E9%9D%9E%E5%8F%B6%E5%AD%90%E8%8A%82%E7%82%B9%E7%9A%84%E5%BA%8F%E5%8F%B7%E6%98%AF-n-2-1-%E7%9A%84%E5%8E%9F%E5%9B%A0/" class="post-title-link" itemprop="url">堆排序（完全二叉树）最后一个非叶子节点（父节点）的序号是 n/2-1 的原因</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2021-08-30 18:20:22" itemprop="dateCreated datePublished" datetime="2021-08-30T18:20:22+08:00">2021-08-30</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2022-10-30 00:51:37" itemprop="dateModified" datetime="2022-10-30T00:51:37+08:00">2022-10-30</time>
              </span>

          
            <span id="/2021/08/30/%E5%A0%86%E6%8E%92%E5%BA%8F%EF%BC%88%E5%AE%8C%E5%85%A8%E4%BA%8C%E5%8F%89%E6%A0%91%EF%BC%89%E6%9C%80%E5%90%8E%E4%B8%80%E4%B8%AA%E9%9D%9E%E5%8F%B6%E5%AD%90%E8%8A%82%E7%82%B9%E7%9A%84%E5%BA%8F%E5%8F%B7%E6%98%AF-n-2-1-%E7%9A%84%E5%8E%9F%E5%9B%A0/" class="post-meta-item leancloud_visitors" data-flag-title="堆排序（完全二叉树）最后一个非叶子节点（父节点）的序号是 n/2-1 的原因" title="阅读次数">
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              <span class="post-meta-item-text">阅读次数：</span>
              <span class="leancloud-visitors-count"></span>
            </span>
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="fa fa-comment-o"></i>
      </span>
      <span class="post-meta-item-text">Valine：</span>
    
    <a title="valine" href="/2021/08/30/%E5%A0%86%E6%8E%92%E5%BA%8F%EF%BC%88%E5%AE%8C%E5%85%A8%E4%BA%8C%E5%8F%89%E6%A0%91%EF%BC%89%E6%9C%80%E5%90%8E%E4%B8%80%E4%B8%AA%E9%9D%9E%E5%8F%B6%E5%AD%90%E8%8A%82%E7%82%B9%E7%9A%84%E5%BA%8F%E5%8F%B7%E6%98%AF-n-2-1-%E7%9A%84%E5%8E%9F%E5%9B%A0/#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/2021/08/30/%E5%A0%86%E6%8E%92%E5%BA%8F%EF%BC%88%E5%AE%8C%E5%85%A8%E4%BA%8C%E5%8F%89%E6%A0%91%EF%BC%89%E6%9C%80%E5%90%8E%E4%B8%80%E4%B8%AA%E9%9D%9E%E5%8F%B6%E5%AD%90%E8%8A%82%E7%82%B9%E7%9A%84%E5%BA%8F%E5%8F%B7%E6%98%AF-n-2-1-%E7%9A%84%E5%8E%9F%E5%9B%A0/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>参考并修正了其中的错误：<a target="_blank" rel="noopener" href="https://www.cnblogs.com/malw/p/10542557.html">https://www.cnblogs.com/malw/p/10542557.html</a></p>
<p>堆排序是基于完全二叉树实现的，在将一个数组调整成一个堆的时候，关键之一的是确定最后一个非叶子节点的序号，这个序号为 <code>n/2-1</code>，<code>n</code> 为数组的长度。但是为什么呢？</p>
<p>可以分两种情况考虑：</p>
<ol>
<li>堆的最后一个非叶子节点只有左孩子</li>
<li>堆的最后一个非叶子节点有左右两个孩子</li>
</ol>
<p>完全二叉树的性质之一是：如果节点序号为 <code>i</code>，则它的左孩子序号为 <code>2*i+1</code>，右孩子序号为 <code>2*i+2</code>。</p>
<ol>
<li>对于 <code>情况1</code> 左孩子(最后一个元素)的序号为 <code>n-1</code>，则 <code>n-1=2*i+1</code>，推出 <code>i=n/2-1</code>；</li>
<li>对于 <code>情况2</code> 左孩子(倒数第二个元素)的序号为 <code>n-2</code>，则 <code>n-2=2*i+1</code>，推出 <code>i=(n-1)/2-1</code>；右孩子(最后一个元素)的序号为 <code>n-1</code>，则 <code>n-1=2*i+2</code>，推出（这里跟左孩子推出的一样） <code>i=(n-1)/2-1</code>；</li>
</ol>
<p>很显然，当完全二叉树最后一个节点是其父节点的左孩子时，树的节点数（数组元素数）为偶数；当完全二叉树最后一个节点是其父节点的右孩子时（满二叉树），树的节点数（数组元素数）为奇数。</p>
<p>根据一般编程语言的特性，整数除不尽时向下取整，则若 <code>n</code> 为奇数时 <code>(n-1)/2-1=n/2-1</code>。</p>
<p>因此对于 <code>情况2</code> 最后一个非叶子节点的序号也是 <code>n/2-1</code>。</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://listenerri.com/2021/08/15/freedesktop-software/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="listenerri">
      <meta itemprop="description" content="学的越多越发现会的越少 : )">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="listenerri's blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2021/08/15/freedesktop-software/" class="post-title-link" itemprop="url">freedesktop software</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2021-08-15 16:27:00" itemprop="dateCreated datePublished" datetime="2021-08-15T16:27:00+08:00">2021-08-15</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2022-10-30 00:51:37" itemprop="dateModified" datetime="2022-10-30T00:51:37+08:00">2022-10-30</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/translation/" itemprop="url" rel="index"><span itemprop="name">translation</span></a>
                </span>
            </span>

          
            <span id="/2021/08/15/freedesktop-software/" class="post-meta-item leancloud_visitors" data-flag-title="freedesktop software" title="阅读次数">
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              <span class="post-meta-item-text">阅读次数：</span>
              <span class="leancloud-visitors-count"></span>
            </span>
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="fa fa-comment-o"></i>
      </span>
      <span class="post-meta-item-text">Valine：</span>
    
    <a title="valine" href="/2021/08/15/freedesktop-software/#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/2021/08/15/freedesktop-software/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="与-freedesktop-org-相关的软件"><a href="#与-freedesktop-org-相关的软件" class="headerlink" title="与 freedesktop.org 相关的软件"></a>与 freedesktop.org 相关的软件</h2><p>下面是一个与 freedesktop.org 相关的不完全软件列表。</p>
<p>你可以去我们的 <a target="_blank" rel="noopener" href="https://gitlab.freedesktop.org/">Gitlab 服务</a>查看和下载它们的代码、Bugs、提交合并请求。</p>
<p>freedesktop.org 本身并不每天运行这些项目：我们为自己运行项目的社区提供托管和基础设施。</p>
<p>All projects hosted by us are available under open-source licenses under equitable terms to all parties. These projects do not require Contributor License Agreements which assign more rights to one party than another. They may require an assertion like the Developer’s Certificate of Origin which is simply a more formal document to state that you are leally permitted to contribute under the project’s license; you do not, however, need to assign anyone rights that you do not yourself receive to others’ contributions.</p>
<h2 id="桌面中间件和框架"><a href="#桌面中间件和框架" class="headerlink" title="桌面中间件和框架"></a>桌面中间件和框架</h2><p>这些项目提供了桌面的基础服务。</p>
<ul>
<li>AccountsService 提供本地账户的信息。</li>
<li>D-Bus 是一个详细系统，提供了进程间和服务间通讯。</li>
<li>GeoClue 提供地理位置信息。</li>
<li>PolicyKit 是一个允许非特权应用配置和请求特权服务和接口的工具。</li>
<li>NetworkManager 允许应用发现，配置，连接有线和无线网络。</li>
<li>realmd 允许客户端发现，认证和加入网络（如 Active Directory）。</li>
<li>upower 提供了关于电源设备，如电池和充电状态的信息。</li>
<li>Zeitgeist 是一个桌面事件日志框架。</li>
</ul>
<h2 id="桌面规范和工具"><a href="#桌面规范和工具" class="headerlink" title="桌面规范和工具"></a>桌面规范和工具</h2><p>这些规范和工具定义了跨桌面标准和互通性。</p>
          <!--noindex-->
            <div class="post-button">
              <a class="btn" href="/2021/08/15/freedesktop-software/#more" rel="contents">
                阅读全文 &raquo;
              </a>
            </div>
          <!--/noindex-->
        
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://listenerri.com/2021/08/15/bash-parameter-expansion-%E5%8F%82%E6%95%B0%E6%89%A9%E5%B1%95/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="listenerri">
      <meta itemprop="description" content="学的越多越发现会的越少 : )">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="listenerri's blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2021/08/15/bash-parameter-expansion-%E5%8F%82%E6%95%B0%E6%89%A9%E5%B1%95/" class="post-title-link" itemprop="url">bash parameter expansion 参数扩展</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2021-08-15 11:43:00" itemprop="dateCreated datePublished" datetime="2021-08-15T11:43:00+08:00">2021-08-15</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2022-10-30 00:51:37" itemprop="dateModified" datetime="2022-10-30T00:51:37+08:00">2022-10-30</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/bash/" itemprop="url" rel="index"><span itemprop="name">bash</span></a>
                </span>
            </span>

          
            <span id="/2021/08/15/bash-parameter-expansion-%E5%8F%82%E6%95%B0%E6%89%A9%E5%B1%95/" class="post-meta-item leancloud_visitors" data-flag-title="bash parameter expansion 参数扩展" title="阅读次数">
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              <span class="post-meta-item-text">阅读次数：</span>
              <span class="leancloud-visitors-count"></span>
            </span>
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="fa fa-comment-o"></i>
      </span>
      <span class="post-meta-item-text">Valine：</span>
    
    <a title="valine" href="/2021/08/15/bash-parameter-expansion-%E5%8F%82%E6%95%B0%E6%89%A9%E5%B1%95/#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/2021/08/15/bash-parameter-expansion-%E5%8F%82%E6%95%B0%E6%89%A9%E5%B1%95/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>摘自 bash man 手册</p>
<p>字符 <code>$</code> 引入了参数扩展，命令替换和算术扩展。要扩展的参数名或符号可能包含在花括号中，花括号可选的，但是可以使得要扩展的变量不会与紧随其后的字符合并，成为新的名称。</p>
<p>使用花括号的时候，匹配的右括号是第一个  <code>&#125;</code>，并且它没有被反斜杠引用或包含在一个引用的字符串中，也没有包含在一个嵌入的算术扩展，命令替换或是参数扩展中。</p>
<ul>
<li><p><code>$&#123;parameter&#125;</code></p>
<p>  被替换为 parameter 的值。</p>
<ul>
<li>如果 parameter 是一个位置参数，并且数字多于一位时；或者当紧随 parameter 之后有不属于名称一部分的字符时，都必须加上花括号。</li>
<li>如果 parameter 的第一个字符是一个感叹号，将引进一层间接变量。bash 使用以 parameter 的其余部分为名的变量的值作为变量的名称；接下来新的变量被扩展，它的值用在随后的替换当中，而不是使用 parameter 自身的值。这也称为 indirect expansion(间接扩展). 例外情况是下面讲到的 <code>$&#123;!prefix*&#125;</code>。</li>
</ul>
</li>
</ul>
<p>下面的每种情况中，word 都要经过波浪线扩展，参数扩展，命令替换和算术扩展。如果不进行子字符串扩展，bash 测试一个没有定义或值为空的参数；忽略冒号的结果是只测试未定义的参数。</p>
<ul>
<li><p><code>$&#123;parameter:-word&#125;</code></p>
<p>  Use Default Values(使用默认值)。如果 parameter 未定义或值为空，将替换为 word 的扩展。否则，将替换为 parameter 的值。</p>
</li>
<li><p><code>$&#123;parameter:=word&#125;</code></p>
<p>  Assign Default Values(赋默认值)。如果 parameter 未定义或值为空， word 的扩展将赋予 parameter. parameter 的值将被替换。位置参数和特殊参数不能用这种方式赋值。</p>
</li>
<li><p><code>$&#123;parameter:?word&#125;</code></p>
<p>  Display Error if Null or Unset(显示错误，如果未定义或值为空)。如果 parameter 未定义或值为空，word (或一条信息，如果 word 不存在) 的扩展将写入到标准错误；shell 如果不是交互的，则将退出。否则，parameter 的值将被替换。</p>
</li>
<li><p><code>$&#123;parameter:+word&#125;</code><br>  Use Alternate Value(使用可选值)。如果 parameter 未定义或值为空，不会进行替换；否则将替换为 word 扩展后的值。</p>
</li>
<li><p><code>$&#123;parameter:offset&#125;</code> 和 <code>$&#123;parameter:offset:length&#125;</code></p>
<p>  Substring Expansion(子字符串扩展)。扩展为 parameter 的最多 length 个字符，从 offset 指定的字符开始。</p>
<ul>
<li>如果忽略了 length，扩展为 parameter 的子字符串，从 offset 指定的字符串开始。length 和 offset 是算术表达式 (参见下面的 ARITHMETICEVALUATION 算术求值 段落)。length 必须是一个大于等于 0 的数值。</li>
<li>如果 offset 求值结果小于 0，值将当作从 parameter 的值的末尾算起的偏移量。</li>
<li>如果 parameter 是 @，结果是 length 个位置参数，从 offset 开始。</li>
<li>如果 parameter 是一个数组名，以 @ 或 * 索引，结果是数组的 length 个成员，从 <code>$&#123;parameter[offset]&#125;</code> 开始。子字符串的下标是从 0 开始的，除非使用位置参数时，下标从 1 开始。</li>
</ul>
</li>
<li><p><code>$&#123;!prefix*&#125;</code></p>
<p>  扩展为名称以 prefix 开始的变量名，以特殊变量 IFS 的第一个字符分隔。</p>
</li>
<li><p><code>$&#123;#parameter&#125;</code></p>
<p>  替换为 parameter 的值的长度 (字符数目)。</p>
<ul>
<li>如果 parameter 是 * 或者是 @, 替换的值是位置参数的个数。</li>
<li>如果 parameter 是一个数组名，下标是 * 或者是 @, 替换的值是数组中元素的个数。</li>
</ul>
</li>
<li><p><code>$&#123;parameter#word&#125;</code> 和 <code>$&#123;parameter##word&#125;</code></p>
<p>  word  被扩展为一个模式，就像路径扩展中一样。</p>
<ul>
<li>如果这个模式匹配 parameter 的值的起始，那么扩展的结果是将 parameter 扩展后的值中，最短的匹配 (``#’’ 的情况) 或者最长的匹配 (``##’’的情况) 删除的结果。</li>
<li>如果 parameter 是 @ 或者是 *, 则模式删除操作将依次施用于每个位置参数，最后扩展为结果的列表。</li>
<li>如果 parameter 是一个数组变量，下标是 @ 或者是 *, 模式删除将依次施用于数组中的每个成员，最后扩展为结果的列表。</li>
</ul>
</li>
<li><p><code>$&#123;parameter%word&#125;</code> 和 <code>$&#123;parameter%%word&#125;</code></p>
<p>  word 被扩展为一个模式，就像路径扩展中一样。</p>
<ul>
<li>如果这个模式匹配 parameter 扩展后的值的尾部，那么扩展的结果是将 parameter 扩展后的值中，最短的匹配 (``%’’ 的情况) 或者最长的匹配 (``%%’’的情况) 删除的结果。</li>
<li>如果 parameter 是 @ 或者是 *, 则模式删除操作将依次施用于每个位置参数，最后扩展为结果的列表。</li>
<li>如果 parameter 是一个数组变量，下标是 @ 或者是 *, 模式删除将依次施用于数组中的每个成员，最后扩展为结果的列表。</li>
</ul>
</li>
<li><p><code>$&#123;parameter/pattern/string&#125;</code> 和 <code>$&#123;parameter//pattern/string&#125;</code></p>
<p>  pattern 被扩展为一个模式，就像路径扩展中一样。parameter 被扩展，其值中最长的匹配 pattern 的内容被替换为 string。在第一种形式中，只有第一个匹配被替换。第二种形式使得 pattern 中所有匹配都被替换为 string。</p>
<ul>
<li>如果 pattern 以 #  开始，它必须匹配 parameter 扩展后值的首部。</li>
<li>如果 pattern 以 % 开始，它必须匹配 parameter 扩展后值的尾部。</li>
<li>如果 string 是空值，pattern 的匹配都将被删除， pattern 之后的 / 将被忽略。</li>
<li>如果 parameter 是 @ 或者是 *, 则替换操作将依次施用于每个位置参数，最后扩展为结果的列表。</li>
<li>如果 parameter 是一个数组变量，下标是 @ 或者是 *, 模式删除将依次施用于数组中的每个成员，最后扩展为结果的列表。</li>
</ul>
</li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  


  
  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><span class="space">&hellip;</span><a class="page-number" href="/page/12/">12</a><a class="extend next" rel="next" href="/page/2/"><i class="fa fa-angle-right" aria-label="下一页"></i></a>
  </nav>



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="listenerri"
      src="/images/avatar.jpg">
  <p class="site-author-name" itemprop="name">listenerri</p>
  <div class="site-description" itemprop="description">学的越多越发现会的越少 : )</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">118</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">22</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">249</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/listenerri" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;listenerri" rel="noopener" target="_blank"><i class="fa fa-fw fa-github"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:listenerri@gmail.com" title="E-Mail → mailto:listenerri@gmail.com" rel="noopener" target="_blank"><i class="fa fa-fw fa-envelope"></i>E-Mail</a>
      </span>
  </div>


  <div class="links-of-blogroll motion-element">
    <div class="links-of-blogroll-title">
      <i class="fa fa-fw fa-link"></i>
      Links
    </div>
    <ul class="links-of-blogroll-list">
        <li class="links-of-blogroll-item">
          <a href="http://blog.justforlxz.com/" title="http:&#x2F;&#x2F;blog.justforlxz.com" rel="noopener" target="_blank">竹子</a>
        </li>
        <li class="links-of-blogroll-item">
          <a href="https://blog.csdn.net/qq_33449307" title="https:&#x2F;&#x2F;blog.csdn.net&#x2F;qq_33449307" rel="noopener" target="_blank">DD</a>
        </li>
        <li class="links-of-blogroll-item">
          <a href="https://blog.csdn.net/itguangit" title="https:&#x2F;&#x2F;blog.csdn.net&#x2F;itguangit" rel="noopener" target="_blank">XiaoGuang</a>
        </li>
        <li class="links-of-blogroll-item">
          <a href="https://zhiqiu.top/" title="https:&#x2F;&#x2F;zhiqiu.top" rel="noopener" target="_blank">一叶知秋</a>
        </li>
        <li class="links-of-blogroll-item">
          <a href="http://www.mksoft.work/" title="http:&#x2F;&#x2F;www.mksoft.work" rel="noopener" target="_blank">YC</a>
        </li>
    </ul>
  </div>

      </div>
        <div class="back-to-top motion-element">
          <i class="fa fa-arrow-up"></i>
          <span>0%</span>
        </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 2016 – 
  <span itemprop="copyrightYear">2023</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">listenerri</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Gemini</a> 强力驱动
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>




  
  <script>
    (function(){
      var bp = document.createElement('script');
      var curProtocol = window.location.protocol.split(':')[0];
      bp.src = (curProtocol === 'https') ? 'https://zz.bdstatic.com/linksubmit/push.js' : 'http://push.zhanzhang.baidu.com/push.js';
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(bp, s);
    })();
  </script>




  
<script src="/js/local-search.js"></script>













  

  


<script>
NexT.utils.loadComments(document.querySelector('#valine-comments'), () => {
  NexT.utils.getScript('//unpkg.com/valine/dist/Valine.min.js', () => {
    var GUEST = ['nick', 'mail', 'link'];
    var guest = 'nick,mail,link';
    guest = guest.split(',').filter(item => {
      return GUEST.includes(item);
    });
    new Valine({
      el         : '#valine-comments',
      verify     : false,
      notify     : true,
      appId      : 'X0UkF88VBoXXbzI80WhmgIyF-gzGzoHsz',
      appKey     : 'CLyVWqSO30mL4Hg34jCGTheF',
      placeholder: "I have something to say",
      avatar     : 'mm',
      meta       : guest,
      pageSize   : '10' || 10,
      visitor    : true,
      lang       : 'zh-cn' || 'zh-cn',
      path       : location.pathname,
      recordIP   : false,
      serverURLs : ''
    });
  }, window.Valine);
});
</script>

</body>
</html>
